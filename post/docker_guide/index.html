<!doctype html>
<html lang="zh-CN">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <meta name="referrer" content="no-referrer-when-downgrade">
    

    <title>Docker简易指南 | 魏奇的博客</title>
    <meta property="og:title" content="Docker简易指南 - 魏奇的博客">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2022-06-22T10:42:36&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2022-06-22T10:42:36&#43;08:00'>
        
    <meta name="Keywords" content="golang,go语言,go语言笔记,java,android,博客,项目管理,python,软件架构,公众号,小程序">
    <meta name="description" content="Docker简易指南">
        
    <meta name="author" content="魏奇">
    <meta property="og:url" content="https://blog.imw7.com/post/docker_guide/">
    <link rel="shortcut icon" href='/favicon.ico'  type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
        <link href="https://cdn.bootcdn.net/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" rel="stylesheet">
    
    
    
    
        <link rel="stylesheet" href='/css/douban.css'>
    
        <link rel="stylesheet" href='/css/other.css'>
    
</head>

<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://blog.imw7.com/">
                        魏奇的博客
                    </a>
                
                <p class="description">海阔凭鱼跃，天高任鸟飞</p>
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="current" href="https://blog.imw7.com/">首页</a>
                    
                    <a  href="https://blog.imw7.com/archives/" title="归档">归档</a>
                    
                    <a  href="https://blog.imw7.com/about/" title="关于">关于</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    <style type="text/css">
    .post-toc {
        position: absolute;
        top: 0;
        right: 0;
        width: 200px;
        margin-right: 0px;
        padding: 5px 10px;
        font-family: Athelas, STHeiti, Microsoft Yahei, serif;
        font-size: 12px;
        border: 1px solid rgba(0, 0, 0, .07);
        border-radius: 5px;
        background-color: rgba(255, 255, 255, 0.98);
        background-clip: padding-box;
        -webkit-box-shadow: 1px 1px 2px rgba(0, 0, 0, .125);
        box-shadow: 1px 1px 2px rgba(0, 0, 0, .125);
        word-wrap: break-word;
        white-space: nowrap;
        -webkit-box-sizing: border-box;
        box-sizing: border-box;
        z-index: 999;
        cursor: pointer;
        max-height: 45%;
        overflow-y: auto;
        overflow-x: hidden;
        float: right;
    }

    .post-toc .post-toc-title {
        width: 100%;
        margin: 0 auto;
        font-size: 18px;
        font-weight: 400;
        text-transform: uppercase;
        text-align: center;
    }

    .post-toc .post-toc-content {
        font-size: 12px;
    }

    .post-toc .post-toc-content>nav>ul {
        margin: 8px 0;
    }

    .post-toc .post-toc-content ul {
        padding-left: 10px;
        list-style: none;
        margin: 0.5em;
        line-height: 1.8em;
    }

    .post-toc .post-toc-content ul ul ul ul ul {
        margin-right: 10px;
        display: none;
    }

    @media print,
    screen and (max-width:1057px) {
        .post-toc {
            display: none;
        }
    }
</style>
<div class="post-toc" style="top: 280px; right: 0px; float: right;">
    <h2 class="post-toc-title">文章目录</h2>
    <div class="post-toc-content">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#docker安装">Docker安装</a>
      <ul>
        <li><a href="#安装步骤">安装步骤</a></li>
        <li><a href="#阿里云镜像加速">阿里云镜像加速</a></li>
      </ul>
    </li>
    <li><a href="#docker常用命令">Docker常用命令</a>
      <ul>
        <li><a href="#帮助启动类命令">帮助启动类命令</a></li>
        <li><a href="#镜像命令">镜像命令</a></li>
        <li><a href="#容器命令">容器命令</a></li>
      </ul>
    </li>
    <li><a href="#docker镜像">Docker镜像</a>
      <ul>
        <li><a href="#是什么">是什么</a></li>
        <li><a href="#重点理解">重点理解</a></li>
        <li><a href="#docker镜像commit操作案例">Docker镜像commit操作案例</a></li>
      </ul>
    </li>
    <li><a href="#本地镜像发布到阿里云">本地镜像发布到阿里云</a>
      <ul>
        <li><a href="#本地镜像发布到阿里云流程">本地镜像发布到阿里云流程</a></li>
        <li><a href="#镜像的生成方法">镜像的生成方法</a></li>
        <li><a href="#将本地镜像推送到阿里云">将本地镜像推送到阿里云</a></li>
        <li><a href="#将阿里云上的镜像下载到本地">将阿里云上的镜像下载到本地</a></li>
      </ul>
    </li>
    <li><a href="#本地镜像发布到私有库">本地镜像发布到私有库</a>
      <ul>
        <li><a href="#本地镜像发布到私有库流程">本地镜像发布到私有库流程</a></li>
        <li><a href="#是什么-1">是什么</a></li>
        <li><a href="#将本地镜像推送到私有库">将本地镜像推送到私有库</a></li>
      </ul>
    </li>
    <li><a href="#docker容器数据卷">Docker容器数据卷</a>
      <ul>
        <li><a href="#是什么-2">是什么</a></li>
        <li><a href="#能干嘛">能干嘛</a></li>
        <li><a href="#数据卷案例">数据卷案例</a></li>
      </ul>
    </li>
    <li><a href="#docker常规安装简介">Docker常规安装简介</a>
      <ul>
        <li><a href="#总体步骤">总体步骤</a></li>
        <li><a href="#安装tomcat">安装Tomcat</a></li>
        <li><a href="#安装mysql">安装MySQL</a></li>
        <li><a href="#安装redis">安装Redis</a></li>
        <li><a href="#安装nginx">安装Nginx</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>
<script type="text/javascript">
    $(document).ready(function () {
        var postToc = $(".post-toc");
        if (postToc.length) {
            var rightPos = window.screenX+$("#main").offset().left;
            if(rightPos<220){
                postToc.css({"width":rightPos+10,"margin-right":0})
            }

            var t = postToc.offset().top - 20,
                a = {
                    start: {
                        position: "absolute",
                        top: t
                    },
                    process: {
                        position: "fixed",
                        top: 20
                    },
                };
            $(window).scroll(function () {
                var e = $(window).scrollTop();
                e < t ? postToc.css(a.start) : postToc.css(a.process)
            })
        }
    })
</script>
    <article class="post">
        <header>
            <h1 class="post-title">Docker简易指南</h1>
        </header>
        <date class="post-meta meta-date">
            2022年6月22日
        </date>
        
        <div class="post-meta">
            <span>|</span>
            
            <span class="meta-category"><a href='/categories/Docker'>Docker</a></span>
            
        </div>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">| 本文阅读量 <span id="busuanzi_value_page_pv"></span><span> 次</span></span>
                     
        </div>
        
        
        <div class="clear" style="display: none;">
            <div class="toc-article" style="float: right;">
                <div class="toc-title">文章目录</div>
            </div>
        </div>
        
        <div class="post-content">
            <p>本文是Docker的简易使用指南，包含方方面面的知识，争取通过本文能够对Docker有个全面的了解。</p>
<h2 id="docker安装">Docker安装</h2>
<p>这部分以CentOS为例，根据Docker官网给出的<a href="https://docs.docker.com/engine/install/centos/">安装教程</a>进行整理和总结。</p>
<h3 id="安装步骤">安装步骤</h3>
<h4 id="确定你是centos7及以上版本">确定你是CentOS7及以上版本</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ cat /etc/redhat-release
</span></span></code></pre></div><h4 id="卸载旧版本">卸载旧版本</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ sudo yum remove docker <span style="color:#666;font-style:italic">\
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#666;font-style:italic"></span>                  docker-client <span style="color:#666;font-style:italic">\
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#666;font-style:italic"></span>                  docker-client-latest <span style="color:#666;font-style:italic">\
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#666;font-style:italic"></span>                  docker-common <span style="color:#666;font-style:italic">\
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span><span style="color:#666;font-style:italic"></span>                  docker-latest <span style="color:#666;font-style:italic">\
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span><span style="color:#666;font-style:italic"></span>                  docker-latest-logrotate <span style="color:#666;font-style:italic">\
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span><span><span style="color:#666;font-style:italic"></span>                  docker-logrotate <span style="color:#666;font-style:italic">\
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8</span><span><span style="color:#666;font-style:italic"></span>                  docker-engine
</span></span></code></pre></div><h4 id="yum安装gcc相关">yum安装gcc相关</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#888;font-style:italic"># 前提：CentOS能上外网</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>$ sudo yum -y install gcc
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>$ sudo yum -y install gcc-c++
</span></span></code></pre></div><h4 id="安装需要的软件包">安装需要的软件包</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ sudo yum install -y yum-utils
</span></span></code></pre></div><h4 id="设置stable镜像仓库">设置stable镜像仓库</h4>
<p>因为防火墙的原因，中国大陆地区需要设置可靠的镜像仓库，以阿里云为例。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ sudo yum-config-manager --add-repo http://mirror.aliyun.com/docker-ce/linux/centos/docker-ce.repo
</span></span></code></pre></div><h4 id="更新yum软件包索引">更新yum软件包索引</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ sudo yum makecache fast
</span></span></code></pre></div><h4 id="安装docker-ce">安装Docker CE</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ sudo yum install docker-ce docker-ce-cli containerd.io docker-compose-plugin
</span></span></code></pre></div><h4 id="启动docker">启动Docker</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ sudo systemctl start docker
</span></span></code></pre></div><h4 id="测试">测试</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ sudo docker version
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>$ sudo docker run hello-world
</span></span></code></pre></div><h4 id="卸载docker引擎">卸载Docker引擎</h4>
<ol>
<li>卸载 Docker Engine、CLI、Containerd 和 Docker Compose 软件包：</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ sudo yum remove docker-ce docker-ce-cli containerd.io docker-compose-plugin
</span></span></code></pre></div><ol start="2">
<li>主机上的映像、容器、卷或自定义配置文件不会自动删除。要删除所有映像、容器和卷：</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ sudo rm -rf /var/lib/docker
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>$ sudo rm -rf /var/lib/containerd
</span></span></code></pre></div><h4 id="docker免sudo权限">Docker免sudo权限</h4>
<p>安装完 <code>docker</code>，每次必须用 <code>sudo</code> 权限操作，比较麻烦。将 <code>docker</code> 加入 <code>sudo</code> 用户组，即可默认 <code>sudo</code> 权限运行，而不用 <code>sudo</code>。具体步骤如下：</p>
<ol>
<li>添加 <code>docker group</code></li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ sudo groupadd docker
</span></span></code></pre></div><ol start="2">
<li>将当前用户添加到 <code>docker</code> 组</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ sudo gpasswd -a <span style="color:#666;font-style:italic">${</span><span style="color:#666;font-weight:bold;font-style:italic">USER</span><span style="color:#666;font-style:italic">}</span> docker
</span></span></code></pre></div><ol start="3">
<li>重启 <code>docker</code> 服务</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ systemctl restart docker
</span></span></code></pre></div><ol start="4">
<li>刷新 <code>docker</code> 组成员</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ newgrp - docker
</span></span></code></pre></div><h3 id="阿里云镜像加速">阿里云镜像加速</h3>
<p>是什么 <a href="https://promotion.aliyun.com/ntms/act/kubernetes.html">https://promotion.aliyun.com/ntms/act/kubernetes.html</a></p>
<p>注册一个属于自己的阿里云账户（可复用支付宝账号）</p>
<h4 id="获得加速器地址连接">获得加速器地址连接</h4>
<h5 id="登陆阿里云开发者平台">登陆阿里云开发者平台</h5>
<p>
        <a data-fancybox="gallery" href="https://blog.imw7.com/images/docker/aliyun_login.png">
            <img class="mx-auto" alt="aliyun_login" src="https://blog.imw7.com/images/docker/aliyun_login.png" />
        </a>
    </p>
<h5 id="点击控制台">点击控制台</h5>
<p>
        <a data-fancybox="gallery" href="https://blog.imw7.com/images/docker/aliyun_console.png">
            <img class="mx-auto" alt="aliyun_console" src="https://blog.imw7.com/images/docker/aliyun_console.png" />
        </a>
    </p>
<h5 id="选择容器镜像服务">选择容器镜像服务</h5>
<p>
        <a data-fancybox="gallery" href="https://blog.imw7.com/images/docker/aliyun_mirror1.png">
            <img class="mx-auto" alt="aliyun_mirror1" src="https://blog.imw7.com/images/docker/aliyun_mirror1.png" />
        </a>
    </p>
<h5 id="获取加速器地址">获取加速器地址</h5>
<p>
        <a data-fancybox="gallery" href="https://blog.imw7.com/images/docker/aliyun_mirror2.png">
            <img class="mx-auto" alt="aliyun_mirror2" src="https://blog.imw7.com/images/docker/aliyun_mirror2.png" />
        </a>
    </p>
<h4 id="粘贴脚本直接执行">粘贴脚本直接执行</h4>
<h5 id="安装升级docker客户端">安装／升级Docker客户端</h5>
<p>推荐安装1.10.0以上版本的Docker客户端，参考文档<a href="https://yq.aliyun.com/articles/110806">docker-ce</a></p>
<h5 id="配置镜像加速器">配置镜像加速器</h5>
<p>针对Docker客户端版本大于 1.10.0 的用户</p>
<p>您可以通过修改daemon配置文件/etc/docker/daemon.json来使用加速器</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>sudo mkdir -p /etc/docker
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>sudo tee /etc/docker/daemon.json <span style="color:#666;font-style:italic">&lt;&lt;-&#39;EOF&#39;
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#666;font-style:italic">{
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#666;font-style:italic">  &#34;registry-mirrors&#34;: [&#34;https://wivds1wh.mirror.aliyuncs.com&#34;]
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span><span style="color:#666;font-style:italic">}
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span><span style="color:#666;font-style:italic">EOF</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span><span>sudo systemctl daemon-reload
</span></span></code></pre></div><h4 id="重启服务器">重启服务器</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ sudo systemctl restart docker
</span></span></code></pre></div><h2 id="docker常用命令">Docker常用命令</h2>
<h3 id="帮助启动类命令">帮助启动类命令</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#888;font-style:italic"># 启动docker</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>$ systemctl start docker
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span><span style="color:#888;font-style:italic"># 停止docker</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>$ systemctl stop docker
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#888;font-style:italic"># 重启docker</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>$ systemctl restart docker
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#888;font-style:italic"># 查看docker状态</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>$ systemctl status docker
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span><span style="color:#888;font-style:italic"># 开机启动</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>$ systemctl <span style="font-weight:bold;font-style:italic">enable</span> docker
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span><span style="color:#888;font-style:italic"># 查看docker概要信息</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>$ docker info
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span><span style="color:#888;font-style:italic"># 查看docker总体帮助文档</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span>$ docker --help
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span><span style="color:#888;font-style:italic"># 查看docker命令帮助文档</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span>$ docker 具体命令 --help
</span></span></code></pre></div><h3 id="镜像命令">镜像命令</h3>
<h4 id="docker-images-options-repositorytag">docker images [OPTIONS] [REPOSITORY[:TAG]]</h4>
<p>1、列出本地主机上的镜像</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker images
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>REPOSITORY    TAG       IMAGE ID       CREATED        SIZE
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>ubuntu        latest    27941809078c   2 weeks ago    77.8MB
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>hello-world   latest    feb5d9fea6a5   9 months ago   13.3kB
</span></span></code></pre></div><p>各个选项说明</p>
<table>
<thead>
<tr>
<th>选项</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>REPOSITORY</td>
<td style="text-align:left">表示镜像的仓库源</td>
</tr>
<tr>
<td>TAG</td>
<td style="text-align:left">镜像的标签</td>
</tr>
<tr>
<td>IMAGE ID</td>
<td style="text-align:left">镜像ID</td>
</tr>
<tr>
<td>CREATED</td>
<td style="text-align:left">镜像创建时间</td>
</tr>
<tr>
<td>SIZE</td>
<td style="text-align:left">镜像大小</td>
</tr>
</tbody>
</table>
<p>注：同一仓库源可以有多个TAG版本，代表这个仓库源的不同版本，我们使用 <code>REPOSITORY:TAG</code> 来定义不同的镜像。如果你不指定一个镜像的版本标签，例如你只使用ubuntu，docker将默认使用 <code>ubuntu:latest</code> 镜像。</p>
<p>2、OPTIONS说明</p>
<p><code>-a</code>：列出本地所有的镜像（含历史影像层）</p>
<p><code>-q</code>：只显示镜像ID</p>
<h4 id="docker-search-options-term">docker search [OPTIONS] TERM</h4>
<p>1、网站</p>
<p><a href="https://hub.docker.com">https://hub.docker.com</a></p>
<p>2、命令</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker search [OPTIONS] 镜像名字
</span></span></code></pre></div><p>例子：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker search redis
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>NAME  DESCRIPTION        							  STARS     OFFICIAL   AUTOMATED
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>redis Redis is an open <span style="font-weight:bold;font-style:italic">source</span> key-value store that…   11050     [OK]       
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>...
</span></span></code></pre></div><p>OPTIONS说明</p>
<p><code>--limit</code>：只列出N个镜像，默认25个</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker search --limit 5 redis
</span></span></code></pre></div><h4 id="docker-pull-options-nametagdigest">docker pull [OPTIONS] NAME[:TAG|@DIGEST]</h4>
<p>下载镜像命令</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker pull 镜像名字[:TAG]
</span></span></code></pre></div><p>注：没有TAG就是最新版，等价于<code>docker pull 镜像名字:latest</code></p>
<h4 id="docker-system-df">docker system df</h4>
<p>查看镜像/容器/数据卷所占的空间</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker system df
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>TYPE            TOTAL     ACTIVE    SIZE      RECLAIMABLE
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>Images          2         2         77.83MB   0B (0%)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>Containers      3         0         49B       49B (100%)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>Local Volumes   0         0         0B        0B
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span>Build Cache     0         0         0B        0B
</span></span></code></pre></div><h4 id="docker-rmi-options-image-image">docker rmi [OPTIONS] IMAGE [IMAGE&hellip;]</h4>
<p>删除一个或多个镜像</p>
<p>1、删除单个</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker rmi -f 镜像ID
</span></span></code></pre></div><p>2、删除多个</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker rmi -f 镜像名1:TAG 镜像名2:TAG
</span></span></code></pre></div><p>3、删除全部</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker rmi -f <span style="font-weight:bold">$(</span>docker images -qa<span style="font-weight:bold">)</span>
</span></span></code></pre></div><p>面试题：谈谈docker虚悬镜像是什么？</p>
<p>仓库名、标签都是<code>&lt;none&gt;</code>的镜像，俗称虚悬镜像<code>dangling image</code></p>
<h3 id="容器命令">容器命令</h3>
<h4 id="新建启动容器">新建+启动容器</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker run [OPTIONS] IMAGE [COMMAND] [ARG...]
</span></span></code></pre></div><p>1、OPTIONS说明</p>
<p>有些是一个减号，有些是两个减号</p>
<p><code>--name=&quot;容器新名字&quot;</code>：为容器指定一个名称</p>
<p><code>-d</code>：后台运行容器并返回容器ID，也即启动守护式容器（后台运行）</p>
<p><strong><code>-i</code>：以交互模式运行容器，通常与<code>-t</code>同时使用</strong></p>
<p><strong><code>-t</code>：为容器重新分配一个伪输入终端，通常与<code>-i</code>同时使用</strong></p>
<p>也即<strong>启动交互式容器（前台有伪终端，等待交互）</strong></p>
<p><code>-P</code>：<strong>随机</strong>端口映射，大写P</p>
<p><code>-p</code>：<strong>指定</strong>端口映射，小写p</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">-p hostPort:containerPort</td>
<td>端口映射 -p 8080:80</td>
</tr>
<tr>
<td style="text-align:left">-p ip:hostPort:containerPort</td>
<td>配置监听地址 -p 10.0.0.100:8080:80</td>
</tr>
<tr>
<td style="text-align:left">-p ip::containerPort</td>
<td>随机分配端口 -p 10.0.0.100::80</td>
</tr>
<tr>
<td style="text-align:left">-p hostPort:containerPort:udp</td>
<td>指定协议 -p 8080:80:tcp</td>
</tr>
<tr>
<td style="text-align:left">-p 81:80 -p 443:443</td>
<td>指定多个</td>
</tr>
</tbody>
</table>
<p>2、启动交互式容器（前台命令行）</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker images
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>REPOSITORY    TAG       IMAGE ID       CREATED        SIZE
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>ubuntu        latest    27941809078c   2 weeks ago    77.8MB
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>hello-world   latest    feb5d9fea6a5   9 months ago   13.3kB
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>$ docker run -it ubuntu /bin/bash
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span>root@aeea6c8ac772:/# ps -ef
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span><span>UID        PID  PPID  C STIME TTY          TIME CMD
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8</span><span>root         1     0  0 05:04 pts/0    00:00:00 /bin/bash
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9</span><span>root         9     1  0 05:04 pts/0    00:00:00 ps -ef
</span></span></code></pre></div><p>使用镜像ubuntu:latest以交互模式启动一个容器，在容器内执行/bin/bash命令：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker run -it ubuntu /bin/bash
</span></span></code></pre></div><p><strong>参数说明</strong>：</p>
<p><code>-i</code>：交互式操作</p>
<p><code>-t</code>：终端</p>
<p><code>ubuntu</code>：ubuntu镜像</p>
<p><code>/bin/bash</code>：放在镜像名后的是命令，这里我们希望有个交互式Shell，因此用的是 /bin/bash</p>
<p>要退出终端，直接输入<code>exit</code></p>
<h4 id="列出当前所有正在运行的容器">列出当前所有正在运行的容器</h4>
<p>1、命令</p>
<pre tabindex="0"><code class="language-2\" data-lang="2\">$ docker ps [OPTIONS]
</code></pre><p>例如：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker ps
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>CONTAINER ID  IMAGE   COMMAND      CREATED        STATUS       PORTS  NAMES
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>0de077b13a8b  ubuntu  <span style="color:#666;font-style:italic">&#34;/bin/bash&#34;</span>  6 minutes ago  Up 6 minutes        youthful_ja
</span></span></code></pre></div><p>2、OPTIONS说明</p>
<p><code>-a</code>：列出当前所在<strong>正在运行</strong>的容器+<strong>历史上运行过的</strong>容器</p>
<p><code>-l</code>：显示最近创建的容器</p>
<p><code>-n</code>：显示最近n个创建的容器</p>
<p><code>-q</code>：<strong>静默模式，只显示容器编号</strong></p>
<h4 id="退出容器">退出容器</h4>
<p>两种退出方式</p>
<p>1、exit</p>
<p><code>run</code>进去容器，<code>exit</code>退出，<strong>容器停止</strong></p>
<p>2、ctrl+p+q</p>
<p><code>run</code>进去容器，<code>ctrl+p+q</code>退出，<strong>容器不停止</strong></p>
<h4 id="启动已停止运行的容器">启动已停止运行的容器</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker start 容器ID或者容器名
</span></span></code></pre></div><h4 id="重启容器">重启容器</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker restart 容器ID或者容器名
</span></span></code></pre></div><h4 id="停止容器">停止容器</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker stop 容器ID或者容器名
</span></span></code></pre></div><h4 id="强制停止容器">强制停止容器</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker <span style="font-weight:bold;font-style:italic">kill</span> 容器ID或者容器名
</span></span></code></pre></div><h4 id="删除已停止的容器">删除已停止的容器</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker rm 容器ID
</span></span></code></pre></div><p><em>危险操作</em>：一次性删除多个容器实例</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker rm -f <span style="font-weight:bold">$(</span>docker ps -a -q<span style="font-weight:bold">)</span>
</span></span></code></pre></div><p>或者</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker ps -a -q | xargs docker rm
</span></span></code></pre></div><h4 id="重要">重要</h4>
<p>有镜像才能创建容器，这是根本前提（下载一个Redis6.0.8镜像演示）</p>
<h5 id="启动守护式容器后台服务器">启动守护式容器（后台服务器）</h5>
<p>在大部分的场景下，我们希望docker的服务是在后台运行的，我们可以通过<code>-d</code>指定容器的后台运行模式。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker run -d 容器名
</span></span></code></pre></div><p>使用镜像<code>ubuntu:latest</code>以后台模式启动一个容器：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker run -d ubuntu
</span></span></code></pre></div><p><em><strong>问题</strong></em>：然后<code>docker ps -a</code>进行查看，<strong>会发现容器已经退出</strong>。</p>
<p>很重要的要说明一点：<strong>Docker容器后台运行，就必须有一个前台进程</strong>。</p>
<p>容器运行的命令如果不是那些<strong>一直挂起的命令</strong>（比如运行top，tail），就是会自动退出的。</p>
<p>这个是docker的机制问题，比如你的web容器，我们以nginx为例，正常情况夏，我们配置启动服务只需要启动响应的service即可。例如<code>service nginx start</code>。</p>
<p>但是，这样做，nginx为后台进程模式运行，就导致docker前台没有运行的应用，这样的容器后台启动后，会立即自杀，因为它觉得自己没事可做了。</p>
<p>所以，最佳的解决方案是，<strong>将你要运行的程序以前台进程的形式运行，常见就是命令行模式，表示我还有交互操作，别中断，O(∩_∩)O哈哈~</strong>。</p>
<h6 id="redis前后台启动演示例子">redis前后台启动演示例子</h6>
<p>①前台交互式启动</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker run -it redis:6.0.8
</span></span></code></pre></div><p>②后台守护式启动</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker run -d redis:6.0.8
</span></span></code></pre></div><h5 id="查看容器日志">查看容器日志</h5>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker logs [OPTIONS] CONTAINER
</span></span></code></pre></div><p>例如：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span>$ docker logs 8616a62e0639
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>1:C 21 Jun 2022 06:41:38.228 <span style="color:#888;font-style:italic"># oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>1:C 21 Jun 2022 06:41:38.228 <span style="color:#888;font-style:italic"># Redis version=6.0.8, bits=64, commit=00000000, modified=0, pid=1, just started</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>1:C 21 Jun 2022 06:41:38.228 <span style="color:#888;font-style:italic"># Warning: no config file specified, using the default config. In order to specify a config file use redis-server /path/to/redis.conf</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>1:M 21 Jun 2022 06:41:38.229 * Running <span style="color:#666;font-weight:bold;font-style:italic">mode</span>=standalone, <span style="color:#666;font-weight:bold;font-style:italic">port</span>=6379.
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>1:M 21 Jun 2022 06:41:38.229 <span style="color:#888;font-style:italic"># WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>1:M 21 Jun 2022 06:41:38.229 <span style="color:#888;font-style:italic"># Server initialized</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>1:M 21 Jun 2022 06:41:38.229 <span style="color:#888;font-style:italic"># WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add &#39;vm.overcommit_memory = 1&#39; to /etc/sysctl.conf and then reboot or run the command &#39;sysctl vm.overcommit_memory=1&#39; for this to take effect.</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>1:M 21 Jun 2022 06:41:38.229 <span style="color:#888;font-style:italic"># WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command &#39;echo madvise &gt; /sys/kernel/mm/transparent_hugepage/enabled&#39; as root, and add it to your /etc/rc.local in order to retain the setting after a reboot. Redis must be restarted after THP is disabled (set to &#39;madvise&#39; or &#39;never&#39;).</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>1:M 21 Jun 2022 06:41:38.230 * Ready to accept connections
</span></span></code></pre></div><h5 id="查看容器内运行的进程">查看容器内运行的进程</h5>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker top CONTAINER [ps OPTIONS]
</span></span></code></pre></div><p>例如：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker top 8616a62e0639
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>UID      PID    PPID   C       STIME       TTY    TIME        CMD
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>polkitd  26537  26518  0       14:41       ?      00:00:02    redis-server *:6379
</span></span></code></pre></div><h5 id="查看容器内部细节">查看容器内部细节</h5>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker inspect [OPTIONS] NAME|ID [NAME|ID...]
</span></span></code></pre></div><p>例如：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  1</span><span>$ docker inspect 8616a62e0639
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  2</span><span>[
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  3</span><span>    {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  4</span><span>        <span style="color:#666;font-style:italic">&#34;Id&#34;</span>: <span style="color:#666;font-style:italic">&#34;8616a62e06394d8d64fe64ec14396b50990f29480e2805198b0948548770a717&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  5</span><span>        <span style="color:#666;font-style:italic">&#34;Created&#34;</span>: <span style="color:#666;font-style:italic">&#34;2022-06-21T06:41:37.92007182Z&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  6</span><span>        <span style="color:#666;font-style:italic">&#34;Path&#34;</span>: <span style="color:#666;font-style:italic">&#34;docker-entrypoint.sh&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  7</span><span>        <span style="color:#666;font-style:italic">&#34;Args&#34;</span>: [
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  8</span><span>            <span style="color:#666;font-style:italic">&#34;redis-server&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  9</span><span>        ],
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 10</span><span>        <span style="color:#666;font-style:italic">&#34;State&#34;</span>: {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 11</span><span>            <span style="color:#666;font-style:italic">&#34;Status&#34;</span>: <span style="color:#666;font-style:italic">&#34;running&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 12</span><span>            <span style="color:#666;font-style:italic">&#34;Running&#34;</span>: true,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 13</span><span>            <span style="color:#666;font-style:italic">&#34;Paused&#34;</span>: false,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 14</span><span>            <span style="color:#666;font-style:italic">&#34;Restarting&#34;</span>: false,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 15</span><span>            <span style="color:#666;font-style:italic">&#34;OOMKilled&#34;</span>: false,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 16</span><span>            <span style="color:#666;font-style:italic">&#34;Dead&#34;</span>: false,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 17</span><span>            <span style="color:#666;font-style:italic">&#34;Pid&#34;</span>: 26537,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 18</span><span>            <span style="color:#666;font-style:italic">&#34;ExitCode&#34;</span>: 0,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 19</span><span>            <span style="color:#666;font-style:italic">&#34;Error&#34;</span>: <span style="color:#666;font-style:italic">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 20</span><span>            <span style="color:#666;font-style:italic">&#34;StartedAt&#34;</span>: <span style="color:#666;font-style:italic">&#34;2022-06-21T06:41:38.221059032Z&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 21</span><span>            <span style="color:#666;font-style:italic">&#34;FinishedAt&#34;</span>: <span style="color:#666;font-style:italic">&#34;0001-01-01T00:00:00Z&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 22</span><span>        },
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 23</span><span>        <span style="color:#666;font-style:italic">&#34;Image&#34;</span>: <span style="color:#666;font-style:italic">&#34;sha256:16ecd277293476392b71021cdd585c40ad68f4a7488752eede95928735e39df4&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 24</span><span>        <span style="color:#666;font-style:italic">&#34;ResolvConfPath&#34;</span>: <span style="color:#666;font-style:italic">&#34;/var/lib/docker/containers/8616a62e06394d8d64fe64ec14396b50990f29480e2805198b0948548770a717/resolv.conf&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 25</span><span>        <span style="color:#666;font-style:italic">&#34;HostnamePath&#34;</span>: <span style="color:#666;font-style:italic">&#34;/var/lib/docker/containers/8616a62e06394d8d64fe64ec14396b50990f29480e2805198b0948548770a717/hostname&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 26</span><span>        <span style="color:#666;font-style:italic">&#34;HostsPath&#34;</span>: <span style="color:#666;font-style:italic">&#34;/var/lib/docker/containers/8616a62e06394d8d64fe64ec14396b50990f29480e2805198b0948548770a717/hosts&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 27</span><span>        <span style="color:#666;font-style:italic">&#34;LogPath&#34;</span>: <span style="color:#666;font-style:italic">&#34;/var/lib/docker/containers/8616a62e06394d8d64fe64ec14396b50990f29480e2805198b0948548770a717/8616a62e06394d8d64fe64ec14396b50990f29480e2805198b0948548770a717-json.log&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 28</span><span>        <span style="color:#666;font-style:italic">&#34;Name&#34;</span>: <span style="color:#666;font-style:italic">&#34;/jolly_chatelet&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 29</span><span>        <span style="color:#666;font-style:italic">&#34;RestartCount&#34;</span>: 0,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 30</span><span>        <span style="color:#666;font-style:italic">&#34;Driver&#34;</span>: <span style="color:#666;font-style:italic">&#34;overlay2&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 31</span><span>        <span style="color:#666;font-style:italic">&#34;Platform&#34;</span>: <span style="color:#666;font-style:italic">&#34;linux&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 32</span><span>        <span style="color:#666;font-style:italic">&#34;MountLabel&#34;</span>: <span style="color:#666;font-style:italic">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 33</span><span>        <span style="color:#666;font-style:italic">&#34;ProcessLabel&#34;</span>: <span style="color:#666;font-style:italic">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 34</span><span>        <span style="color:#666;font-style:italic">&#34;AppArmorProfile&#34;</span>: <span style="color:#666;font-style:italic">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 35</span><span>        <span style="color:#666;font-style:italic">&#34;ExecIDs&#34;</span>: null,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 36</span><span>        <span style="color:#666;font-style:italic">&#34;HostConfig&#34;</span>: {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 37</span><span>            <span style="color:#666;font-style:italic">&#34;Binds&#34;</span>: null,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 38</span><span>            <span style="color:#666;font-style:italic">&#34;ContainerIDFile&#34;</span>: <span style="color:#666;font-style:italic">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 39</span><span>            <span style="color:#666;font-style:italic">&#34;LogConfig&#34;</span>: {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 40</span><span>                <span style="color:#666;font-style:italic">&#34;Type&#34;</span>: <span style="color:#666;font-style:italic">&#34;json-file&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 41</span><span>                <span style="color:#666;font-style:italic">&#34;Config&#34;</span>: {}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 42</span><span>            },
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 43</span><span>            <span style="color:#666;font-style:italic">&#34;NetworkMode&#34;</span>: <span style="color:#666;font-style:italic">&#34;default&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 44</span><span>            <span style="color:#666;font-style:italic">&#34;PortBindings&#34;</span>: {},
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 45</span><span>            <span style="color:#666;font-style:italic">&#34;RestartPolicy&#34;</span>: {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 46</span><span>                <span style="color:#666;font-style:italic">&#34;Name&#34;</span>: <span style="color:#666;font-style:italic">&#34;no&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 47</span><span>                <span style="color:#666;font-style:italic">&#34;MaximumRetryCount&#34;</span>: 0
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 48</span><span>            },
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 49</span><span>            <span style="color:#666;font-style:italic">&#34;AutoRemove&#34;</span>: false,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 50</span><span>            <span style="color:#666;font-style:italic">&#34;VolumeDriver&#34;</span>: <span style="color:#666;font-style:italic">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 51</span><span>            <span style="color:#666;font-style:italic">&#34;VolumesFrom&#34;</span>: null,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 52</span><span>            <span style="color:#666;font-style:italic">&#34;CapAdd&#34;</span>: null,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 53</span><span>            <span style="color:#666;font-style:italic">&#34;CapDrop&#34;</span>: null,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 54</span><span>            <span style="color:#666;font-style:italic">&#34;CgroupnsMode&#34;</span>: <span style="color:#666;font-style:italic">&#34;host&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 55</span><span>            <span style="color:#666;font-style:italic">&#34;Dns&#34;</span>: [],
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 56</span><span>            <span style="color:#666;font-style:italic">&#34;DnsOptions&#34;</span>: [],
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 57</span><span>            <span style="color:#666;font-style:italic">&#34;DnsSearch&#34;</span>: [],
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 58</span><span>            <span style="color:#666;font-style:italic">&#34;ExtraHosts&#34;</span>: null,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 59</span><span>            <span style="color:#666;font-style:italic">&#34;GroupAdd&#34;</span>: null,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 60</span><span>            <span style="color:#666;font-style:italic">&#34;IpcMode&#34;</span>: <span style="color:#666;font-style:italic">&#34;private&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 61</span><span>            <span style="color:#666;font-style:italic">&#34;Cgroup&#34;</span>: <span style="color:#666;font-style:italic">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 62</span><span>            <span style="color:#666;font-style:italic">&#34;Links&#34;</span>: null,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 63</span><span>            <span style="color:#666;font-style:italic">&#34;OomScoreAdj&#34;</span>: 0,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 64</span><span>            <span style="color:#666;font-style:italic">&#34;PidMode&#34;</span>: <span style="color:#666;font-style:italic">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 65</span><span>            <span style="color:#666;font-style:italic">&#34;Privileged&#34;</span>: false,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 66</span><span>            <span style="color:#666;font-style:italic">&#34;PublishAllPorts&#34;</span>: false,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 67</span><span>            <span style="color:#666;font-style:italic">&#34;ReadonlyRootfs&#34;</span>: false,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 68</span><span>            <span style="color:#666;font-style:italic">&#34;SecurityOpt&#34;</span>: null,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 69</span><span>            <span style="color:#666;font-style:italic">&#34;UTSMode&#34;</span>: <span style="color:#666;font-style:italic">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 70</span><span>            <span style="color:#666;font-style:italic">&#34;UsernsMode&#34;</span>: <span style="color:#666;font-style:italic">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 71</span><span>            <span style="color:#666;font-style:italic">&#34;ShmSize&#34;</span>: 67108864,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 72</span><span>            <span style="color:#666;font-style:italic">&#34;Runtime&#34;</span>: <span style="color:#666;font-style:italic">&#34;runc&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 73</span><span>            <span style="color:#666;font-style:italic">&#34;ConsoleSize&#34;</span>: [
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 74</span><span>                0,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 75</span><span>                0
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 76</span><span>            ],
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 77</span><span>            <span style="color:#666;font-style:italic">&#34;Isolation&#34;</span>: <span style="color:#666;font-style:italic">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 78</span><span>            <span style="color:#666;font-style:italic">&#34;CpuShares&#34;</span>: 0,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 79</span><span>            <span style="color:#666;font-style:italic">&#34;Memory&#34;</span>: 0,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 80</span><span>            <span style="color:#666;font-style:italic">&#34;NanoCpus&#34;</span>: 0,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 81</span><span>            <span style="color:#666;font-style:italic">&#34;CgroupParent&#34;</span>: <span style="color:#666;font-style:italic">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 82</span><span>            <span style="color:#666;font-style:italic">&#34;BlkioWeight&#34;</span>: 0,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 83</span><span>            <span style="color:#666;font-style:italic">&#34;BlkioWeightDevice&#34;</span>: [],
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 84</span><span>            <span style="color:#666;font-style:italic">&#34;BlkioDeviceReadBps&#34;</span>: null,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 85</span><span>            <span style="color:#666;font-style:italic">&#34;BlkioDeviceWriteBps&#34;</span>: null,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 86</span><span>            <span style="color:#666;font-style:italic">&#34;BlkioDeviceReadIOps&#34;</span>: null,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 87</span><span>            <span style="color:#666;font-style:italic">&#34;BlkioDeviceWriteIOps&#34;</span>: null,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 88</span><span>            <span style="color:#666;font-style:italic">&#34;CpuPeriod&#34;</span>: 0,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 89</span><span>            <span style="color:#666;font-style:italic">&#34;CpuQuota&#34;</span>: 0,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 90</span><span>            <span style="color:#666;font-style:italic">&#34;CpuRealtimePeriod&#34;</span>: 0,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 91</span><span>            <span style="color:#666;font-style:italic">&#34;CpuRealtimeRuntime&#34;</span>: 0,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 92</span><span>            <span style="color:#666;font-style:italic">&#34;CpusetCpus&#34;</span>: <span style="color:#666;font-style:italic">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 93</span><span>            <span style="color:#666;font-style:italic">&#34;CpusetMems&#34;</span>: <span style="color:#666;font-style:italic">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 94</span><span>            <span style="color:#666;font-style:italic">&#34;Devices&#34;</span>: [],
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 95</span><span>            <span style="color:#666;font-style:italic">&#34;DeviceCgroupRules&#34;</span>: null,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 96</span><span>            <span style="color:#666;font-style:italic">&#34;DeviceRequests&#34;</span>: null,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 97</span><span>            <span style="color:#666;font-style:italic">&#34;KernelMemory&#34;</span>: 0,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 98</span><span>            <span style="color:#666;font-style:italic">&#34;KernelMemoryTCP&#34;</span>: 0,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 99</span><span>            <span style="color:#666;font-style:italic">&#34;MemoryReservation&#34;</span>: 0,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">100</span><span>            <span style="color:#666;font-style:italic">&#34;MemorySwap&#34;</span>: 0,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">101</span><span>            <span style="color:#666;font-style:italic">&#34;MemorySwappiness&#34;</span>: null,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">102</span><span>            <span style="color:#666;font-style:italic">&#34;OomKillDisable&#34;</span>: false,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">103</span><span>            <span style="color:#666;font-style:italic">&#34;PidsLimit&#34;</span>: null,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">104</span><span>            <span style="color:#666;font-style:italic">&#34;Ulimits&#34;</span>: null,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">105</span><span>            <span style="color:#666;font-style:italic">&#34;CpuCount&#34;</span>: 0,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">106</span><span>            <span style="color:#666;font-style:italic">&#34;CpuPercent&#34;</span>: 0,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">107</span><span>            <span style="color:#666;font-style:italic">&#34;IOMaximumIOps&#34;</span>: 0,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">108</span><span>            <span style="color:#666;font-style:italic">&#34;IOMaximumBandwidth&#34;</span>: 0,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">109</span><span>            <span style="color:#666;font-style:italic">&#34;MaskedPaths&#34;</span>: [
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">110</span><span>                <span style="color:#666;font-style:italic">&#34;/proc/asound&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">111</span><span>                <span style="color:#666;font-style:italic">&#34;/proc/acpi&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">112</span><span>                <span style="color:#666;font-style:italic">&#34;/proc/kcore&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">113</span><span>                <span style="color:#666;font-style:italic">&#34;/proc/keys&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">114</span><span>                <span style="color:#666;font-style:italic">&#34;/proc/latency_stats&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">115</span><span>                <span style="color:#666;font-style:italic">&#34;/proc/timer_list&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">116</span><span>                <span style="color:#666;font-style:italic">&#34;/proc/timer_stats&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">117</span><span>                <span style="color:#666;font-style:italic">&#34;/proc/sched_debug&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">118</span><span>                <span style="color:#666;font-style:italic">&#34;/proc/scsi&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">119</span><span>                <span style="color:#666;font-style:italic">&#34;/sys/firmware&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">120</span><span>            ],
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">121</span><span>            <span style="color:#666;font-style:italic">&#34;ReadonlyPaths&#34;</span>: [
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">122</span><span>                <span style="color:#666;font-style:italic">&#34;/proc/bus&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">123</span><span>                <span style="color:#666;font-style:italic">&#34;/proc/fs&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">124</span><span>                <span style="color:#666;font-style:italic">&#34;/proc/irq&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">125</span><span>                <span style="color:#666;font-style:italic">&#34;/proc/sys&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">126</span><span>                <span style="color:#666;font-style:italic">&#34;/proc/sysrq-trigger&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">127</span><span>            ]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">128</span><span>        },
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">129</span><span>        <span style="color:#666;font-style:italic">&#34;GraphDriver&#34;</span>: {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">130</span><span>            <span style="color:#666;font-style:italic">&#34;Data&#34;</span>: {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">131</span><span>                <span style="color:#666;font-style:italic">&#34;LowerDir&#34;</span>: <span style="color:#666;font-style:italic">&#34;/var/lib/docker/overlay2/cc2828def4f62e8de866edbe12655f583a11c586723c20c1fea627f3e8709600-init/diff:/var/lib/docker/overlay2/a8249d070a3c825a941d4d134852fc1aff730a85aee0241ffa2f053b4ad43bcd/diff:/var/lib/docker/overlay2/a5ffdcd005eb951283de7754a3340a747094d52585561a20aa0a83b4ab0e148a/diff:/var/lib/docker/overlay2/32ebaf91ac0fb463c3ecb19fa9db791d2ae6a81f31aa7acb3559f7f5ede0ca72/diff:/var/lib/docker/overlay2/2b77a0daa2495fc17f3b3c7a007b8ea6305f7c5f0e7fd7a7ccca33bdaf56eb3b/diff:/var/lib/docker/overlay2/7e9409453d956f1debe0fe36110ec21aaefaee8bd3eff56e93fe05f022b097b3/diff:/var/lib/docker/overlay2/08f5399c5f34f601b70ace4a2220a653f836d55a0edf4b4d17cb28936120ed14/diff&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">132</span><span>                <span style="color:#666;font-style:italic">&#34;MergedDir&#34;</span>: <span style="color:#666;font-style:italic">&#34;/var/lib/docker/overlay2/cc2828def4f62e8de866edbe12655f583a11c586723c20c1fea627f3e8709600/merged&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">133</span><span>                <span style="color:#666;font-style:italic">&#34;UpperDir&#34;</span>: <span style="color:#666;font-style:italic">&#34;/var/lib/docker/overlay2/cc2828def4f62e8de866edbe12655f583a11c586723c20c1fea627f3e8709600/diff&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">134</span><span>                <span style="color:#666;font-style:italic">&#34;WorkDir&#34;</span>: <span style="color:#666;font-style:italic">&#34;/var/lib/docker/overlay2/cc2828def4f62e8de866edbe12655f583a11c586723c20c1fea627f3e8709600/work&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">135</span><span>            },
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">136</span><span>            <span style="color:#666;font-style:italic">&#34;Name&#34;</span>: <span style="color:#666;font-style:italic">&#34;overlay2&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">137</span><span>        },
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">138</span><span>        <span style="color:#666;font-style:italic">&#34;Mounts&#34;</span>: [
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">139</span><span>            {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">140</span><span>                <span style="color:#666;font-style:italic">&#34;Type&#34;</span>: <span style="color:#666;font-style:italic">&#34;volume&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">141</span><span>                <span style="color:#666;font-style:italic">&#34;Name&#34;</span>: <span style="color:#666;font-style:italic">&#34;9b02f82540fec8416f382d3f55496e77fdfcc5ab2b1c3f6e90d380a026b59698&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">142</span><span>                <span style="color:#666;font-style:italic">&#34;Source&#34;</span>: <span style="color:#666;font-style:italic">&#34;/var/lib/docker/volumes/9b02f82540fec8416f382d3f55496e77fdfcc5ab2b1c3f6e90d380a026b59698/_data&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">143</span><span>                <span style="color:#666;font-style:italic">&#34;Destination&#34;</span>: <span style="color:#666;font-style:italic">&#34;/data&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">144</span><span>                <span style="color:#666;font-style:italic">&#34;Driver&#34;</span>: <span style="color:#666;font-style:italic">&#34;local&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">145</span><span>                <span style="color:#666;font-style:italic">&#34;Mode&#34;</span>: <span style="color:#666;font-style:italic">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">146</span><span>                <span style="color:#666;font-style:italic">&#34;RW&#34;</span>: true,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">147</span><span>                <span style="color:#666;font-style:italic">&#34;Propagation&#34;</span>: <span style="color:#666;font-style:italic">&#34;&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">148</span><span>            }
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">149</span><span>        ],
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">150</span><span>        <span style="color:#666;font-style:italic">&#34;Config&#34;</span>: {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">151</span><span>            <span style="color:#666;font-style:italic">&#34;Hostname&#34;</span>: <span style="color:#666;font-style:italic">&#34;8616a62e0639&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">152</span><span>            <span style="color:#666;font-style:italic">&#34;Domainname&#34;</span>: <span style="color:#666;font-style:italic">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">153</span><span>            <span style="color:#666;font-style:italic">&#34;User&#34;</span>: <span style="color:#666;font-style:italic">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">154</span><span>            <span style="color:#666;font-style:italic">&#34;AttachStdin&#34;</span>: false,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">155</span><span>            <span style="color:#666;font-style:italic">&#34;AttachStdout&#34;</span>: false,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">156</span><span>            <span style="color:#666;font-style:italic">&#34;AttachStderr&#34;</span>: false,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">157</span><span>            <span style="color:#666;font-style:italic">&#34;ExposedPorts&#34;</span>: {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">158</span><span>                <span style="color:#666;font-style:italic">&#34;6379/tcp&#34;</span>: {}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">159</span><span>            },
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">160</span><span>            <span style="color:#666;font-style:italic">&#34;Tty&#34;</span>: false,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">161</span><span>            <span style="color:#666;font-style:italic">&#34;OpenStdin&#34;</span>: false,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">162</span><span>            <span style="color:#666;font-style:italic">&#34;StdinOnce&#34;</span>: false,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">163</span><span>            <span style="color:#666;font-style:italic">&#34;Env&#34;</span>: [
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">164</span><span>                <span style="color:#666;font-style:italic">&#34;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">165</span><span>                <span style="color:#666;font-style:italic">&#34;GOSU_VERSION=1.12&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">166</span><span>                <span style="color:#666;font-style:italic">&#34;REDIS_VERSION=6.0.8&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">167</span><span>                <span style="color:#666;font-style:italic">&#34;REDIS_DOWNLOAD_URL=http://download.redis.io/releases/redis-6.0.8.tar.gz&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">168</span><span>                <span style="color:#666;font-style:italic">&#34;REDIS_DOWNLOAD_SHA=04fa1fddc39bd1aecb6739dd5dd73858a3515b427acd1e2947a66dadce868d68&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">169</span><span>            ],
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">170</span><span>            <span style="color:#666;font-style:italic">&#34;Cmd&#34;</span>: [
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">171</span><span>                <span style="color:#666;font-style:italic">&#34;redis-server&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">172</span><span>            ],
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">173</span><span>            <span style="color:#666;font-style:italic">&#34;Image&#34;</span>: <span style="color:#666;font-style:italic">&#34;redis:6.0.8&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">174</span><span>            <span style="color:#666;font-style:italic">&#34;Volumes&#34;</span>: {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">175</span><span>                <span style="color:#666;font-style:italic">&#34;/data&#34;</span>: {}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">176</span><span>            },
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">177</span><span>            <span style="color:#666;font-style:italic">&#34;WorkingDir&#34;</span>: <span style="color:#666;font-style:italic">&#34;/data&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">178</span><span>            <span style="color:#666;font-style:italic">&#34;Entrypoint&#34;</span>: [
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">179</span><span>                <span style="color:#666;font-style:italic">&#34;docker-entrypoint.sh&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">180</span><span>            ],
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">181</span><span>            <span style="color:#666;font-style:italic">&#34;OnBuild&#34;</span>: null,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">182</span><span>            <span style="color:#666;font-style:italic">&#34;Labels&#34;</span>: {}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">183</span><span>        },
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">184</span><span>        <span style="color:#666;font-style:italic">&#34;NetworkSettings&#34;</span>: {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">185</span><span>            <span style="color:#666;font-style:italic">&#34;Bridge&#34;</span>: <span style="color:#666;font-style:italic">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">186</span><span>            <span style="color:#666;font-style:italic">&#34;SandboxID&#34;</span>: <span style="color:#666;font-style:italic">&#34;bf61f2e19a43db9d1d4f9fc56ab2000ed702ed91de4da5e776a07e1e31e539dc&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">187</span><span>            <span style="color:#666;font-style:italic">&#34;HairpinMode&#34;</span>: false,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">188</span><span>            <span style="color:#666;font-style:italic">&#34;LinkLocalIPv6Address&#34;</span>: <span style="color:#666;font-style:italic">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">189</span><span>            <span style="color:#666;font-style:italic">&#34;LinkLocalIPv6PrefixLen&#34;</span>: 0,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">190</span><span>            <span style="color:#666;font-style:italic">&#34;Ports&#34;</span>: {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">191</span><span>                <span style="color:#666;font-style:italic">&#34;6379/tcp&#34;</span>: null
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">192</span><span>            },
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">193</span><span>            <span style="color:#666;font-style:italic">&#34;SandboxKey&#34;</span>: <span style="color:#666;font-style:italic">&#34;/var/run/docker/netns/bf61f2e19a43&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">194</span><span>            <span style="color:#666;font-style:italic">&#34;SecondaryIPAddresses&#34;</span>: null,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">195</span><span>            <span style="color:#666;font-style:italic">&#34;SecondaryIPv6Addresses&#34;</span>: null,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">196</span><span>            <span style="color:#666;font-style:italic">&#34;EndpointID&#34;</span>: <span style="color:#666;font-style:italic">&#34;4c0e86921bef4eb69f04d66c4748c547f2148450854755c37b17f7c6204c996c&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">197</span><span>            <span style="color:#666;font-style:italic">&#34;Gateway&#34;</span>: <span style="color:#666;font-style:italic">&#34;172.17.0.1&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">198</span><span>            <span style="color:#666;font-style:italic">&#34;GlobalIPv6Address&#34;</span>: <span style="color:#666;font-style:italic">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">199</span><span>            <span style="color:#666;font-style:italic">&#34;GlobalIPv6PrefixLen&#34;</span>: 0,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">200</span><span>            <span style="color:#666;font-style:italic">&#34;IPAddress&#34;</span>: <span style="color:#666;font-style:italic">&#34;172.17.0.2&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">201</span><span>            <span style="color:#666;font-style:italic">&#34;IPPrefixLen&#34;</span>: 16,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">202</span><span>            <span style="color:#666;font-style:italic">&#34;IPv6Gateway&#34;</span>: <span style="color:#666;font-style:italic">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">203</span><span>            <span style="color:#666;font-style:italic">&#34;MacAddress&#34;</span>: <span style="color:#666;font-style:italic">&#34;02:42:ac:11:00:02&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">204</span><span>            <span style="color:#666;font-style:italic">&#34;Networks&#34;</span>: {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">205</span><span>                <span style="color:#666;font-style:italic">&#34;bridge&#34;</span>: {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">206</span><span>                    <span style="color:#666;font-style:italic">&#34;IPAMConfig&#34;</span>: null,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">207</span><span>                    <span style="color:#666;font-style:italic">&#34;Links&#34;</span>: null,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">208</span><span>                    <span style="color:#666;font-style:italic">&#34;Aliases&#34;</span>: null,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">209</span><span>                    <span style="color:#666;font-style:italic">&#34;NetworkID&#34;</span>: <span style="color:#666;font-style:italic">&#34;f80509d058b8ad3bbd0032e40431d90ed7197236bf97697680124412c1492bb0&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">210</span><span>                    <span style="color:#666;font-style:italic">&#34;EndpointID&#34;</span>: <span style="color:#666;font-style:italic">&#34;4c0e86921bef4eb69f04d66c4748c547f2148450854755c37b17f7c6204c996c&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">211</span><span>                    <span style="color:#666;font-style:italic">&#34;Gateway&#34;</span>: <span style="color:#666;font-style:italic">&#34;172.17.0.1&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">212</span><span>                    <span style="color:#666;font-style:italic">&#34;IPAddress&#34;</span>: <span style="color:#666;font-style:italic">&#34;172.17.0.2&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">213</span><span>                    <span style="color:#666;font-style:italic">&#34;IPPrefixLen&#34;</span>: 16,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">214</span><span>                    <span style="color:#666;font-style:italic">&#34;IPv6Gateway&#34;</span>: <span style="color:#666;font-style:italic">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">215</span><span>                    <span style="color:#666;font-style:italic">&#34;GlobalIPv6Address&#34;</span>: <span style="color:#666;font-style:italic">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">216</span><span>                    <span style="color:#666;font-style:italic">&#34;GlobalIPv6PrefixLen&#34;</span>: 0,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">217</span><span>                    <span style="color:#666;font-style:italic">&#34;MacAddress&#34;</span>: <span style="color:#666;font-style:italic">&#34;02:42:ac:11:00:02&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">218</span><span>                    <span style="color:#666;font-style:italic">&#34;DriverOpts&#34;</span>: null
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">219</span><span>                }
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">220</span><span>            }
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">221</span><span>        }
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">222</span><span>    }
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">223</span><span>]
</span></span></code></pre></div><h5 id="进入正在运行的容器并以命令行交互">进入正在运行的容器并以命令行交互</h5>
<p>重新进入正在运行的容器有两种方法：</p>
<p>第一种：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker <span style="font-weight:bold;font-style:italic">exec</span> [OPTIONS] CONTAINER COMMAND [ARG...] 
</span></span></code></pre></div><p>重新进入正在运行的容器中：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker <span style="font-weight:bold;font-style:italic">exec</span> -it 8616a62e0639 /bin/bash
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>root@8616a62e0639:/data#
</span></span></code></pre></div><p>第二种：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker attach [OPTIONS] CONTAINER
</span></span></code></pre></div><p>重新进入正在运行的容器：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker attach 8616a62e0639
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>root@8616a62e0639:/data#
</span></span></code></pre></div><p><strong>上述两种方法的区别</strong></p>
<p>① attach 直接进入容器启动命令的终端，不会启动新的进程。用exit退出，会导致容器的停止。</p>
<p>② exec 是在容器中打开新的终端，并且可以启动新的进程。用exit退出，不会导致容器的停止。</p>
<p>推荐使用<code>docker exec</code>命令，因为退出容器终端不会导致容器的停止。</p>
<h5 id="用之前的redis容器实例进入试试">用之前的redis容器实例进入试试</h5>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#888;font-style:italic"># 进入redis服务</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>$ docker <span style="font-weight:bold;font-style:italic">exec</span> -it 容器ID /bin/bash
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>$ docker <span style="font-weight:bold;font-style:italic">exec</span> -it 容器ID redis-cli
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#888;font-style:italic"># 一般用-d后台启动程序，再用exec进入对应容器实例	</span>
</span></span></code></pre></div><p>例如：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span>$ docker ps
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>CONTAINER ID   IMAGE         COMMAND                  CREATED         STATUS         PORTS      NAMES
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>71fd743e48fa   redis:6.0.8   <span style="color:#666;font-style:italic">&#34;docker-entrypoint.s…&#34;</span>   3 minutes ago   Up 3 minutes   6379/tcp   sleepy_gould
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>$ docker <span style="font-weight:bold;font-style:italic">exec</span> -it 71fd743e48fa /bin/bash
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>root@71fd743e48fa:/data# <span style="font-weight:bold;font-style:italic">exit</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span><span style="font-weight:bold;font-style:italic">exit</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>$ docker <span style="font-weight:bold;font-style:italic">exec</span> -it 71fd743e48fa redis-cli
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>127.0.0.1:6379&gt; ping
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>PONG
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>127.0.0.1:6379&gt; <span style="font-weight:bold;font-style:italic">set</span> name eric
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>OK
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>127.0.0.1:6379&gt; get name
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span><span style="color:#666;font-style:italic">&#34;eric&#34;</span>
</span></span></code></pre></div><h5 id="从容器内拷贝文件到主机上">从容器内拷贝文件到主机上</h5>
<p>容器&ndash;&gt;主机</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker cp [OPTIONS] CONTAINER:SRC_PATH DEST_PATH|-
</span></span></code></pre></div><p>公式：<code>docker cp 容器ID:容器内路径 目的地主机路径</code></p>
<p>1、在容器创建文件</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker <span style="font-weight:bold;font-style:italic">exec</span> -it 71fd743e48fa /bin/bash
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>root@71fd743e48fa:/data# <span style="font-weight:bold;font-style:italic">cd</span> /tmp
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>root@71fd743e48fa:/tmp# touch a.txt
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>root@71fd743e48fa:/tmp# ls
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>a.txt
</span></span></code></pre></div><p>2、将文件复制到主机</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>[root@centos]<span style="color:#888;font-style:italic"># docker cp 71fd743e48fa:/tmp/a.txt /root/c.txt</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>[root@centos]<span style="color:#888;font-style:italic"># ls</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>c.txt
</span></span></code></pre></div><p>主机&ndash;&gt;容器</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker cp [OPTIONS] SRC_PATH|- CONTAINER:DEST_PATH
</span></span></code></pre></div><h5 id="导入和导出容器">导入和导出容器</h5>
<p>1、export 导出容器的内容作为一个tar归档文件[对应import命令]</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker <span style="font-weight:bold;font-style:italic">export</span> 容器ID &gt; 文件名.tar
</span></span></code></pre></div><p>在容器端创建文件a.txt，并按ctrl+p+q退出</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker run -it ubuntu /bin/bash
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>root@06fa2250f3e6:/# <span style="font-weight:bold;font-style:italic">cd</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>root@06fa2250f3e6:~# ls
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>root@06fa2250f3e6:~# clear
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>root@06fa2250f3e6:~# touch a.txt 
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span>root@06fa2250f3e6:~# <span style="font-weight:bold;font-style:italic">echo</span> <span style="color:#666;font-style:italic">&#34;Hello, world!&#34;</span> &gt; a.txt
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span><span>root@06fa2250f3e6:~# // ctrl+p+q 退出界面，不退出进程
</span></span></code></pre></div><p>在主机端导出整个容器成tar包</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker <span style="font-weight:bold;font-style:italic">export</span> 06fa2250f3e6 &gt; abcd.tar
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>$ ls
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>abcd.tar
</span></span></code></pre></div><p>2、import 从tar包中的内容创建一个新的文件系统再导入为镜像[对应export]</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ cat 文件名.tar | docker import - 镜像用户/镜像名:镜像版本号
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span>$ docker ps
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>CONTAINER ID   IMAGE         COMMAND                  CREATED              STATUS              PORTS      NAMES
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>06fa2250f3e6   ubuntu        <span style="color:#666;font-style:italic">&#34;/bin/bash&#34;</span>              About a minute ago   Up About a minute              ecstatic_nobel
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>71fd743e48fa   redis:6.0.8   <span style="color:#666;font-style:italic">&#34;docker-entrypoint.s…&#34;</span>   About an hour ago    Up About an hour    6379/tcp   sleepy_gould
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>$ docker rm -f 06fa2250f3e6
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>06fa2250f3e6
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>$ docker ps
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>CONTAINER ID   IMAGE         COMMAND                  CREATED       STATUS       PORTS      NAMES
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>71fd743e48fa   redis:6.0.8   <span style="color:#666;font-style:italic">&#34;docker-entrypoint.s…&#34;</span>   2 hours ago   Up 2 hours   6379/tcp   sleepy_gould
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>$ cat abcd.tar | docker import - ashley/ubuntu:1.0.0
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>sha256:daa7fecb01e3e80143aa665fbc41abcc683d8531eeae4387598f84ad1a1d5fa9
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>$ docker ps
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>CONTAINER ID   IMAGE         COMMAND                  CREATED       STATUS       PORTS      NAMES
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>71fd743e48fa   redis:6.0.8   <span style="color:#666;font-style:italic">&#34;docker-entrypoint.s…&#34;</span>   2 hours ago   Up 2 hours   6379/tcp   sleepy_gould
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>$ docker images
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>REPOSITORY      TAG       IMAGE ID       CREATED          SIZE
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>ashley/ubuntu   1.0.0     daa7fecb01e3   16 seconds ago   77.8MB
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span>ubuntu          latest    27941809078c   2 weeks ago      77.8MB
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span>hello-world     latest    feb5d9fea6a5   9 months ago     13.3kB
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span>redis           6.0.8     16ecd2772934   20 months ago    104MB
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span>$ docker run -it daa7fecb01e3 /bin/bash
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span>root@ae152bad6453:/# <span style="font-weight:bold;font-style:italic">cd</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span>root@ae152bad6453:~# ls
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span>a.txt
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span><span>root@ae152bad6453:~# cat a.txt
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span><span>Hello, world!
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span><span>root@ae152bad6453:~# 
</span></span></code></pre></div><h2 id="docker镜像">Docker镜像</h2>
<h3 id="是什么">是什么</h3>
<h4 id="概念">概念</h4>
<p>镜像是一种轻量级、可执行的独立软件包，它包含运行某个软件所需的所有内容，我们把应用程序和配置依赖打包好形成一个可交付的运行环境（包括代码、运行时需要的库、环境变量和配置文件等），这个打包好的运行环境就是image镜像文件。</p>
<p>只有通过这个镜像文件才能生成Docker容器实例（类似Go中new出来一个对象）。</p>
<h4 id="分层的镜像">分层的镜像</h4>
<p><strong>镜像是分层的</strong>，以我们的pull为例，在下载过程中我们可以看到docker的镜像好像是在一层一层的下载。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span>$ docker pull mysql
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>Using default tag: latest
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>72a69066d2fe: Pulling fs layer 
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>93619dbc5b36: Pull <span style="font-weight:bold;font-style:italic">complete</span> 
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>99da31dd6142: Pull <span style="font-weight:bold;font-style:italic">complete</span> 
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>626033c43d70: Pull <span style="font-weight:bold;font-style:italic">complete</span> 
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>37d5d7efb64e: Extracting [==================================================&gt;]     149B/149B
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>ac563158d721: Download <span style="font-weight:bold;font-style:italic">complete</span> 
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>d2ba16033dad: Download <span style="font-weight:bold;font-style:italic">complete</span> 
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>688ba7d5c01a: Download <span style="font-weight:bold;font-style:italic">complete</span> 
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>00e060b6d11d: Downloading [===================&gt;                               ]     42MB/105.2MB
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>1c04857f594f: Download <span style="font-weight:bold;font-style:italic">complete</span> 
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>4d7cfa90e6ea: Download <span style="font-weight:bold;font-style:italic">complete</span> 
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>e0431212d27d: Download <span style="font-weight:bold;font-style:italic">complete</span>
</span></span></code></pre></div><h4 id="unionfs联合文件系统">UnionFS（联合文件系统）</h4>
<p>UnionFS是一种分层、轻量级并且高性能的文件系统，它支持<strong>对文件系统的修改作为一次提交来一层层的叠加</strong>，同时可以将不同且目录挂载到同一个虚拟文件系统下（unite several directories into a single virtual filesystem）。Union文件系统是Docker镜像的基础。镜像可以通过分层来进行继承，基于基础镜像（没有父镜像），可以制作各种具体的应用镜像。</p>
<p>特性：一次同时加载多个文件系统，但从外面看起来，只能看到一个文件系统，联合加载会把各层文件系统叠加起来，这样最终的文件系统会包含所有底层的文件和目录。</p>
<h4 id="docker镜像加载原理">Docker镜像加载原理</h4>
<p>docker的镜像实际上由一层一层的文件系统组成，这种层级的文件系统叫UnionFS。</p>
<p>bootfs（boot file system）主要包含bootloader和kernel，bootloader主要是引导加载kernel，Linux刚启动时会加载bootfs文件系统，在<strong>Docker镜像的最底层是引导文件系统bootfs</strong>。这一层与我们典型的Linux/Unix系统是一样的，包含boot加载器和内核。当boot加载完成之后整个内核就都在内存中了，此时内存的使用权已由bootfs转交给内核，此时系统也会卸载bootfs。</p>
<p>rootfs（root file system），在bootfs之上，包含的就是典型Linux系统中的/dev，/proc，/bin，/etc 等标准目录和文件。rootfs就是各种不同的操作系统发行版，比如Ubuntu，CentOS等等。</p>
<p>
        <a data-fancybox="gallery" href="https://blog.imw7.com/images/docker/linux_file_system.png">
            <img class="mx-auto" alt="linux_file_system" src="https://blog.imw7.com/images/docker/linux_file_system.png" />
        </a>
    </p>
<p>平时我们安装进虚拟机的Ubuntu都是好几个G，为什么docker这里才77.8M？</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker images ubuntu
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>REPOSITORY   TAG       IMAGE ID       CREATED       SIZE
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>ubuntu       latest    27941809078c   2 weeks ago   77.8MB
</span></span></code></pre></div><p>对于一个精简的OS，rootfs可以很小，只需要包括最基本的命令、工具和程序库就可以了，因为底层直接用Host的kernel，自己只需要提供rootfs就行了。由此可见对于不同的linux发行版，bootfs基本是一致的，rootfs会有差别，因此不同的发行版可以公用bootfs。</p>
<h4 id="为什么docker镜像要采用这种分层结构呢">为什么Docker镜像要采用这种分层结构呢</h4>
<p>采用镜像分层最大的一个好处就是共享资源，方便复制迁移。之所以采用这种分层结构为的就是方便复用。</p>
<p>比如说有多个镜像都从相同的 base 镜像构建而来，那么 Docker Host 只需在磁盘上保存一份 base 镜像；同时内存中也只需加载一份 base 镜像，就可以为所有容器服务了，而且镜像的每一层都可以共享。</p>
<h3 id="重点理解">重点理解</h3>
<p><strong>Docker镜像层都是只读的，容器层是可写的</strong>。</p>
<p>当容器启动时，一个新的可写层被加载到镜像的顶部。这一层通常被称作”容器层”，”容器层”之下的都叫”镜像层”。</p>
<p>
        <a data-fancybox="gallery" href="https://blog.imw7.com/images/docker/docker_container_image.png">
            <img class="mx-auto" alt="docker_container_image" src="https://blog.imw7.com/images/docker/docker_container_image.png" />
        </a>
    </p>
<p>所有对容器的改动，无论添加、删除、还是修改文件都只会发生在容器层钟。只有容器层是可写的，容器层下面的所有镜像层都是只读的。</p>
<h3 id="docker镜像commit操作案例">Docker镜像commit操作案例</h3>
<h4 id="docker-commit提交容器副本使之成为一个新的镜像">docker commit提交容器副本使之成为一个新的镜像</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker commit -m=<span style="color:#666;font-style:italic">&#34;提交的描述信息&#34;</span> -a=<span style="color:#666;font-style:italic">&#34;作者&#34;</span> 容器ID 要创建的目标镜像名:[标签名]
</span></span></code></pre></div><h4 id="案例演示ubuntu安装vim">案例演示ubuntu安装vim</h4>
<p>1、从Hub上下载ubuntu镜像到本地并成功运行</p>
<p>2、原始的默认ubuntu镜像是不带着vim命令的</p>
<p>3、外网连通的情况下，安装vim</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span>$ docker run -it ubuntu /bin/bash
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>root@f840a57094ad:/# vim a.txt
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>bash: vim: <span style="font-weight:bold;font-style:italic">command</span> not found
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>root@b06b07b5c64f:/# apt-get update
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>Get:1 http://archive.ubuntu.com/ubuntu jammy InRelease [270 kB]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>......                             
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>Fetched 21.6 MB in 13s (1675 kB/s)  
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>Reading package lists... Done
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>root@f840a57094ad:/# apt-get -y install vim
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>Reading package lists... Done
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>......
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>Processing triggers <span style="font-weight:bold">for</span> libc-bin (2.35-0ubuntu3) ...
</span></span></code></pre></div><p>4、安装完成后，commit成自己的新镜像</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker commit -m=<span style="color:#666;font-style:italic">&#34;vim cmd add ok&#34;</span> -a=<span style="color:#666;font-style:italic">&#34;ashley&#34;</span> f840a57094ad imw7/myubuntu:1.1
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>sha256:1e9b0351af1f8fe4a7863a4cfd0b0d1146fdfae61f8ea56d0fcdef9c1ba73f3c
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>$ docker images
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>REPOSITORY      TAG       IMAGE ID       CREATED          SIZE
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>imw7/myubuntu   1.1       1e9b0351af1f   30 seconds ago   180MB
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span>ubuntu          latest    27941809078c   2 weeks ago      77.8MB
</span></span></code></pre></div><p>5、启动新镜像并和原来的对比</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span>$ docker images
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>REPOSITORY      TAG       IMAGE ID       CREATED          SIZE
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>imw7/myubuntu   1.1       1e9b0351af1f   11 minutes ago   180MB
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>ubuntu          latest    27941809078c   2 weeks ago      77.8MB
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>$ docker run -it ubuntu /bin/bash
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>root@ec7727e9390c:/# vim a.txt
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>bash: vim: <span style="font-weight:bold;font-style:italic">command</span> not found
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>root@ec7727e9390c:/# <span style="font-weight:bold;font-style:italic">exit</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="font-weight:bold;font-style:italic">exit</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>$ docker run -it 1e9b0351af1f /bin/bash
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>root@0e3310eed3ba:/# vim a.txt
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>root@0e3310eed3ba:/# cat a.txt
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>This is Docker!
</span></span></code></pre></div><h4 id="小总结">小总结</h4>
<p>Docker中的镜像分层，<strong>支持通过扩展现有镜像，创建新的镜像</strong>。类似Java继承于一个Base基础类，自己再按需扩展。</p>
<p>新镜像是从base镜像一层一层叠加生成的，每安装一个软件，就在现有镜像的基础上增加一层。</p>
<p>
        <a data-fancybox="gallery" href="https://blog.imw7.com/images/docker/docker_layer.png">
            <img class="mx-auto" alt="docker_layer" src="https://blog.imw7.com/images/docker/docker_layer.png" />
        </a>
    </p>
<h2 id="本地镜像发布到阿里云">本地镜像发布到阿里云</h2>
<h3 id="本地镜像发布到阿里云流程">本地镜像发布到阿里云流程</h3>
<p>
        <a data-fancybox="gallery" href="https://blog.imw7.com/images/docker/aliyun_docker_pull_push.png">
            <img class="mx-auto" alt="aliyun_docker_pull_push" src="https://blog.imw7.com/images/docker/aliyun_docker_pull_push.png" />
        </a>
    </p>
<h3 id="镜像的生成方法">镜像的生成方法</h3>
<h4 id="基于当前容器创建一个新的镜像新功能增强">基于当前容器创建一个新的镜像，新功能增强</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker commit [OPTIONS] 容器ID [REPOSITORY[:TAG]]
</span></span></code></pre></div><p>OPTIONS说明：</p>
<p><code>-a</code>：提交的镜像作者</p>
<p><code>-m</code>：提交时的说明名字</p>
<h4 id="dockerfile">Dockerfile</h4>
<p>后续章节介绍</p>
<h3 id="将本地镜像推送到阿里云">将本地镜像推送到阿里云</h3>
<h4 id="本地镜像素材原型">本地镜像素材原型</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker images
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>REPOSITORY      TAG       IMAGE ID       CREATED          SIZE
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>imw7/myubuntu   1.1       1e9b0351af1f   11 minutes ago   180MB
</span></span></code></pre></div><h4 id="阿里云开发者平台">阿里云开发者平台</h4>
<p><a href="https://promotion.aliyun.com/ntms/act/kubernetes.html">https://promotion.aliyun.com/ntms/act/kubernetes.html</a></p>
<h4 id="创建仓库镜像">创建仓库镜像</h4>
<p>1、选择控制台，进入容器镜像服务</p>
<p>
        <a data-fancybox="gallery" href="https://blog.imw7.com/images/docker/aliyun_console2.png">
            <img class="mx-auto" alt="aliyun_console2" src="https://blog.imw7.com/images/docker/aliyun_console2.png" />
        </a>
    </p>
<p>
        <a data-fancybox="gallery" href="https://blog.imw7.com/images/docker/container_image_service.png">
            <img class="mx-auto" alt="container_image_service" src="https://blog.imw7.com/images/docker/container_image_service.png" />
        </a>
    </p>
<p>2、选择个人实例</p>
<p>
        <a data-fancybox="gallery" href="https://blog.imw7.com/images/docker/personal_instance.png">
            <img class="mx-auto" alt="personal_instance" src="https://blog.imw7.com/images/docker/personal_instance.png" />
        </a>
    </p>
<p>3、命名空间</p>
<p>
        <a data-fancybox="gallery" href="https://blog.imw7.com/images/docker/namespace.png">
            <img class="mx-auto" alt="namespace" src="https://blog.imw7.com/images/docker/namespace.png" />
        </a>
    </p>
<p>4、仓库名称</p>
<p>
        <a data-fancybox="gallery" href="https://blog.imw7.com/images/docker/image_hub.png">
            <img class="mx-auto" alt="image_hub" src="https://blog.imw7.com/images/docker/image_hub.png" />
        </a>
    </p>
<p>5、进入管理界面获得脚本</p>
<p>
        <a data-fancybox="gallery" href="https://blog.imw7.com/images/docker/get_script.png">
            <img class="mx-auto" alt="get_script" src="https://blog.imw7.com/images/docker/get_script.png" />
        </a>
    </p>
<h4 id="将镜像推送到阿里云">将镜像推送到阿里云</h4>
<h5 id="将镜像推送到阿里云registry">将镜像推送到阿里云registry</h5>
<p>1、管理界面脚本</p>
<p>
        <a data-fancybox="gallery" href="https://blog.imw7.com/images/docker/script.png">
            <img class="mx-auto" alt="script" src="https://blog.imw7.com/images/docker/script.png" />
        </a>
    </p>
<p>2、脚本实例</p>
<p>使用 <code>docker tag</code> 命令重命名镜像，并将它通过专有网络地址推送至Registry。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker images
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>REPOSITORY      TAG       IMAGE ID       CREATED         SIZE
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>imw7/myubuntu   1.1       1e9b0351af1f   19 hours ago    180MB
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>$ docker tag 1e9b0351af1f registry.cn-shenzhen.aliyuncs.com/imw7/myubuntu:1.1
</span></span></code></pre></div><p>使用  <code>docker push</code> 命令将该镜像推送至远程。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker push registry.cn-shenzhen.aliyuncs.com/imw7/myubuntu:1.1
</span></span></code></pre></div><h3 id="将阿里云上的镜像下载到本地">将阿里云上的镜像下载到本地</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker pull registry.cn-shenzhen.aliyuncs.com/imw7/myubuntu:1.1
</span></span></code></pre></div><h2 id="本地镜像发布到私有库">本地镜像发布到私有库</h2>
<h3 id="本地镜像发布到私有库流程">本地镜像发布到私有库流程</h3>
<p>
        <a data-fancybox="gallery" href="https://blog.imw7.com/images/docker/aliyun_docker_pull_push.png">
            <img class="mx-auto" alt="aliyun_docker_pull_push" src="https://blog.imw7.com/images/docker/aliyun_docker_pull_push.png" />
        </a>
    </p>
<h3 id="是什么-1">是什么</h3>
<p>1、官方Docker Hub地址：https://hub.docker.com/，中国大陆访问太慢了且有被阿里云取代的趋势，不太主流。</p>
<p>2、Dockerhub、阿里云这样的公共镜像仓库可能不太方便，涉及公司机密的不可能提供镜像给公网，所以需要创建一个本地私人仓库供给团队使用，基于公司内部项目构建镜像。</p>
<h4 id="docker-registry">Docker Registry</h4>
<p><code>Docker Registry</code>是官方提供的工具，可以用于构建私有镜像仓库。</p>
<h3 id="将本地镜像推送到私有库">将本地镜像推送到私有库</h3>
<h4 id="下载镜像docker-registry">下载镜像Docker Registry</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker pull registry
</span></span></code></pre></div><h4 id="运行私有库registry相当于本地有个私有docker-hub">运行私有库Registry，相当于本地有个私有Docker Hub</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker run -d -p 5000:5000 -v /root/myregistry/:/tmp/registry --privileged=<span style="font-weight:bold;font-style:italic">true</span> registry
</span></span></code></pre></div><p>默认情况下，仓库被创建在容器的/var/lib/registry目录下，建议自行用容器卷映射，方便于宿主机联调。</p>
<h4 id="案例演示创建一个新镜像ubuntu安装ifconifg命令">案例演示创建一个新镜像，ubuntu安装ifconifg命令</h4>
<p>1、从Hub上下载ubuntu镜像到本地并成功运行</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker pull ubuntu
</span></span></code></pre></div><p>2、原始的ubuntu镜像是不带ifconfig命令的</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>[root@centos ~]<span style="color:#888;font-style:italic"># docker run -it ubuntu /bin/bash</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>root@fa41e46960f0:/# ifconfig
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>bash: ifconfig: <span style="font-weight:bold;font-style:italic">command</span> not found
</span></span></code></pre></div><p>3、外网连通的情况下，安装ifconfig命令并测试通过</p>
<p>①docker容器内执行下述两条命令</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ apt-get update
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>$ apt-get install net-tools
</span></span></code></pre></div><p>②测试通过</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span>root@fa41e46960f0:/# ifconfig
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>eth0: <span style="color:#666;font-weight:bold;font-style:italic">flags</span>=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>        inet 172.17.0.3  netmask 255.255.0.0  broadcast 172.17.255.255
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>        ether 02:42:ac:11:00:03  txqueuelen 0  (Ethernet)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>        RX packets 8987  bytes 22503087 (22.5 MB)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>        RX errors 0  dropped 0  overruns 0  frame 0
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>        TX packets 8949  bytes 769069 (769.0 KB)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>lo: <span style="color:#666;font-weight:bold;font-style:italic">flags</span>=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>        inet 127.0.0.1  netmask 255.0.0.0
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>        loop  txqueuelen 1000  (Local Loopback)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>        RX packets 0  bytes 0 (0.0 B)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>        RX errors 0  dropped 0  overruns 0  frame 0
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>        TX packets 0  bytes 0 (0.0 B)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
</span></span></code></pre></div><p>按<code>ctrl+p+q</code>退出，执行后续操作。</p>
<p>4、安装完成后，commit自己的新镜像</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker commit -m=<span style="color:#666;font-style:italic">&#34;提交的描述信息&#34;</span> -a=<span style="color:#666;font-style:italic">&#34;作者&#34;</span> 容器ID 要创建的目标镜像名:[标签名]
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker commit -m=<span style="color:#666;font-style:italic">&#34;ifconfig cmd add&#34;</span> -a=<span style="color:#666;font-style:italic">&#34;ashley&#34;</span> fa41e46960f0 imw7/myubuntu:1.2
</span></span></code></pre></div><h4 id="curl验证私服库上有什么镜像">curl验证私服库上有什么镜像</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ curl -XGET http://宿主机IP地址:5000/v2/_catalog
</span></span></code></pre></div><p>通过ifconfig可以查看宿主机IP地址</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ curl -XGET http://172.30.108.127:5000/v2/_catalog
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>{<span style="color:#666;font-style:italic">&#34;repositories&#34;</span>:[]} // 空的
</span></span></code></pre></div><h4 id="将新镜像-imw7myubuntu12-修改符合私服规范的tag">将新镜像 imw7/myubuntu:1.2 修改符合私服规范的Tag</h4>
<p>按照公式：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker tag 镜像:Tag Host:Port/Repository:Tag
</span></span></code></pre></div><p><strong>注</strong>：填写自己的host主机IP地址</p>
<p>使用命令<code>docker tag</code>将<code>imw7/myubuntu:1.2</code>这个镜像修改为<code>172.30.108.127:5000/imw7/myubuntu:1.2</code>。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker tag imw7/myubuntu:1.2 172.30.108.127:5000/imw7/myubuntu:1.2
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>$ docker images
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>REPOSITORY                            TAG       IMAGE ID       CREATED          SIZE
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>172.30.108.127:5000/imw7/myubuntu     1.2       def83a58fbd8   53 minutes ago   114MB
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>imw7/myubuntu                         1.2       def83a58fbd8   53 minutes ago   114MB
</span></span></code></pre></div><h4 id="修改配置文件使之支持http">修改配置文件使之支持http</h4>
<p>由于docker默认不允许http方式推送镜像，通过配置选项来取消这个限制。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ cat /etc/docker/daemon.json
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>{
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>  <span style="color:#666;font-style:italic">&#34;registry-mirrors&#34;</span>: [<span style="color:#666;font-style:italic">&#34;https://wivds1wh.mirror.aliyuncs.com&#34;</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>}
</span></span></code></pre></div><p>使用vim命令新增内容：<code>vim /etc/docker/daemon.json</code></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>{
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>  <span style="color:#666;font-style:italic">&#34;registry-mirrors&#34;</span>: [<span style="color:#666;font-style:italic">&#34;https://wivds1wh.mirror.aliyuncs.com&#34;</span>],
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>  <span style="color:#666;font-style:italic">&#34;insecure-registries&#34;</span>:[<span style="color:#666;font-style:italic">&#34;172.30.108.127:5000&#34;</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>}
</span></span></code></pre></div><p>注：修改后如果不生效，建议重启docker。</p>
<h4 id="push推送到私服库">push推送到私服库</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker push 172.30.108.127:5000/imw7/myubuntu:1.2
</span></span></code></pre></div><h4 id="curl验证私服库上有什么镜像2">curl验证私服库上有什么镜像2</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ curl -XGET http://172.30.108.127:5000/v2/_catalog
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>{<span style="color:#666;font-style:italic">&#34;repositories&#34;</span>:[<span style="color:#666;font-style:italic">&#34;imw7/myubuntu&#34;</span>]}
</span></span></code></pre></div><h4 id="pull到本地并运行">pull到本地并运行</h4>
<p>1、删除本地的镜像文件</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker images
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>REPOSITORY                          TAG   IMAGE ID       CREATED       SIZE
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>172.30.108.127:5000/imw7/myubuntu   1.2   def83a58fbd8   2 hours ago   114MB
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>imw7/myubuntu                       1.2   def83a58fbd8   2 hours ago   114MB
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>...
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span>$ docker rmi -f 172.30.108.127:5000/imw7/myubuntu:1.2
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span><span>$ docker rmi -f imw7/myubuntu:1.2
</span></span></code></pre></div><p>2、拉取到本地</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker pull 172.30.108.127:5000/imw7/myubuntu:1.2
</span></span></code></pre></div><p>查看镜像</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker images
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>REPOSITORY                                        TAG       IMAGE ID       CREATED         SIZE
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>imw7/myubuntu                                     1.2       def83a58fbd8   2 hours ago     114MB
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>172.30.108.127:5000/imw7/myubuntu                 1.2       def83a58fbd8   2 hours ago     114MB
</span></span></code></pre></div><p>3、运行</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span>$ docker run -it 172.30.108.127:5000/imw7/myubuntu:1.2 /bin/bash
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>root@93472ebdd6c2:/# ifconfig
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>eth0: <span style="color:#666;font-weight:bold;font-style:italic">flags</span>=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>        inet 172.17.0.3  netmask 255.255.0.0  broadcast 172.17.255.255
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>        ether 02:42:ac:11:00:03  txqueuelen 0  (Ethernet)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>        RX packets 7  bytes 586 (586.0 B)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>        RX errors 0  dropped 0  overruns 0  frame 0
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>        TX packets 0  bytes 0 (0.0 B)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>lo: <span style="color:#666;font-weight:bold;font-style:italic">flags</span>=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>        inet 127.0.0.1  netmask 255.0.0.0
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>        loop  txqueuelen 1000  (Local Loopback)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>        RX packets 0  bytes 0 (0.0 B)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>        RX errors 0  dropped 0  overruns 0  frame 0
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>        TX packets 0  bytes 0 (0.0 B)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
</span></span></code></pre></div><h2 id="docker容器数据卷">Docker容器数据卷</h2>
<p><strong>注</strong>：容器卷记得加入 <code>--privileged=true</code>。</p>
<p>Docker挂载主机目录访问<strong>如果出现<code>cannot open directory .: Permission denied</code></strong>，怎么解决呢？</p>
<p>解决办法：在挂载目录后多加一个 <code>--privileged=true</code> 参数即可。</p>
<p>如果是CentOS7安全模块会比之前系统版本加强，不安全的会先禁止，所以目录挂载的情况被默认为不安全的行为。</p>
<p>在SELinux里面挂载目录被禁止掉了，如果要开启，一般使用<code>--privileged=true</code>命令，扩大容器的权限解决挂载目录没有权限的问题，也即使用该参数，container内的root拥有真正的root权限，否则，container内的root只是外部的一个普通用户权限。</p>
<h3 id="是什么-2">是什么</h3>
<p>卷就是目录或文件，存在于一个或多个容器中，由docker挂载到 容器，但不属于联合文件系统，因此能够绕过Union File System提供一些用于持续存储或共享数据的特性。</p>
<p>卷的设计目的就是<strong>数据的持久化</strong>，完全独立于容器的生存周期，因此Docker不会在容器删除时删除其挂载的数据卷。</p>
<p>1、一句话：有点类似Redis里面的rdb和aof文件</p>
<p>2、将docker容器内的数据保存进宿主机的磁盘中</p>
<p>3、运行一个带有容器卷存储功能的容器实例</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker run -it --privileged=<span style="font-weight:bold;font-style:italic">true</span> -v /宿主机绝对路径目录:/容器内目录 镜像名
</span></span></code></pre></div><h3 id="能干嘛">能干嘛</h3>
<h4 id="需求描述">需求描述</h4>
<p>将运用与运行的环境打包镜像，run后形成容器实例运行，但是对数据的要求希望是持久化的。</p>
<h4 id="作用">作用</h4>
<p>Docker容器产生的数据，如果不备份，那么当容器实例删除后，容器内的数据自然也就没有了。为了能保存数据在docker中我们使用卷。</p>
<h4 id="特点">特点</h4>
<p>1、数据卷可在容器之间共享或重用数据</p>
<p>2、卷中的更改可以直接实时生效</p>
<p>3、数据卷中的更改不会包含在镜像的更新中</p>
<p>4、数据卷的生命周期一直持续到没有容器使用它为止</p>
<h3 id="数据卷案例">数据卷案例</h3>
<h4 id="宿主vs容器之间映射添加容器卷">宿主vs容器之间映射添加容器卷</h4>
<h5 id="直接命令添加">直接命令添加</h5>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker run -it --privileged=<span style="font-weight:bold;font-style:italic">true</span> -v /宿主机绝对路径目录:/容器内目录 镜像名
</span></span></code></pre></div><p>在docker中创建命名为u1的ubuntu镜像，并实现文件的映射：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker run -it --privileged=<span style="font-weight:bold;font-style:italic">true</span> -v /tmp/host_data:/tmp/docker_data --name=u1 ubuntu
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>root@10f4b9049f6f:/# <span style="font-weight:bold;font-style:italic">cd</span> /tmp/docker_data/
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>root@10f4b9049f6f:/tmp/docker_data# ls
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>root@10f4b9049f6f:/tmp/docker_data# touch dockerin.txt
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span>root@10f4b9049f6f:/tmp/docker_data# ls
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span><span>dockerin.txt
</span></span></code></pre></div><p>在宿主机的对应目录中，可以<strong>实时</strong>查看到刚刚在docker中创建的文件：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ <span style="font-weight:bold;font-style:italic">cd</span> /tmp/host_data/
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>$ ls
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>dockerin.txt
</span></span></code></pre></div><p>同样的，在主机创建文件，也可以实时在docker容器中获得对应的文件。</p>
<h5 id="查看数据卷是否挂载成功">查看数据卷是否挂载成功</h5>
<p>可以通过如下命令，查看数据卷是否挂载成功</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker inspect 容器ID
</span></span></code></pre></div><p>举个例子：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span>$ docker ps 
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>CONTAINER ID   IMAGE     COMMAND   CREATED          STATUS          PORTS     NAMES
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>10f4b9049f6f   ubuntu    <span style="color:#666;font-style:italic">&#34;bash&#34;</span>    15 minutes ago   Up 15 minutes             u1
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>$ docker inspect 10f4b9049f6f
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>[
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>    {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>        ...
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>        <span style="color:#666;font-style:italic">&#34;Mounts&#34;</span>: [
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>            {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>                <span style="color:#666;font-style:italic">&#34;Type&#34;</span>: <span style="color:#666;font-style:italic">&#34;bind&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>                <span style="color:#666;font-style:italic">&#34;Source&#34;</span>: <span style="color:#666;font-style:italic">&#34;/tmp/host_data&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>                <span style="color:#666;font-style:italic">&#34;Destination&#34;</span>: <span style="color:#666;font-style:italic">&#34;/tmp/docker_data&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>                <span style="color:#666;font-style:italic">&#34;Mode&#34;</span>: <span style="color:#666;font-style:italic">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>                <span style="color:#666;font-style:italic">&#34;RW&#34;</span>: true,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>                <span style="color:#666;font-style:italic">&#34;Propagation&#34;</span>: <span style="color:#666;font-style:italic">&#34;rprivate&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>            }
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>        ],
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span>        ...
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span>    }
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span>]
</span></span></code></pre></div><p>通过<code>docker inspect</code>命令查看<code>Mounts</code>模块判断是否数据卷挂载成功。</p>
<h5 id="容器和宿主机之间数据共享">容器和宿主机之间数据共享</h5>
<p>首先在宿主机停掉正在运行的容器。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>[root@centos ~]<span style="color:#888;font-style:italic"># docker ps</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>CONTAINER ID   IMAGE     COMMAND   CREATED          STATUS          PORTS     NAMES
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>10f4b9049f6f   ubuntu    <span style="color:#666;font-style:italic">&#34;bash&#34;</span>    29 minutes ago   Up 29 minutes             u1
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>[root@centos ~]<span style="color:#888;font-style:italic"># docker stop 10f4b9049f6f</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>10f4b9049f6f
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span>[root@centos ~]<span style="color:#888;font-style:italic"># docker ps</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span><span>CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES
</span></span></code></pre></div><p>在宿主机的<code>/tmp/host_data/</code>文件夹下写入文件。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ <span style="font-weight:bold;font-style:italic">cd</span> /tmp/host_data/
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>$ ls
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>$ touch c.txt
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>$ ls
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>c.txt  dockerin.txt  hostin.txt
</span></span></code></pre></div><p>然后在宿主机重新启动刚停止的容器。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker start 10f4b9049f6f
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>10f4b9049f6f
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>$ docker <span style="font-weight:bold;font-style:italic">exec</span> -it 10f4b9049f6f /bin/bash
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>root@10f4b9049f6f:/# <span style="font-weight:bold;font-style:italic">cd</span> /tmp/docker_data/
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>root@10f4b9049f6f:/tmp/docker_data# ls
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span>c.txt  dockerin.txt  hostin.txt
</span></span></code></pre></div><p>可以看到在容器停止运行的情况下，在宿主机写入的数据，当容器重新运行后也能够同步。</p>
<p>总结：</p>
<ol>
<li>
<p>docker修改，主机同步获得</p>
</li>
<li>
<p>主机修改，docker同步获得</p>
</li>
<li>
<p>docker容器stop，主机修改，docker容器重启后也能同步获得</p>
</li>
</ol>
<h4 id="读写规则映射添加说明">读写规则映射添加说明</h4>
<h5 id="读写默认">读写（默认）</h5>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker run -it --privileged=<span style="font-weight:bold;font-style:italic">true</span> -v /宿主机绝对路径目录:/容器内目录:rw 镜像名
</span></span></code></pre></div><p>默认就是<code>rw</code>，因此可以省略。</p>
<h5 id="只读">只读</h5>
<p>如果要让容器实例内部被限制，只能读取不能写，可以通过 <code>/容器内目录:ro 镜像名</code>，实现功能：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker run -it --privileged=<span style="font-weight:bold;font-style:italic">true</span> -v /宿主机绝对路径目录:/容器内目录:ro 镜像名
</span></span></code></pre></div><p>注：ro = read only</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker run -it --privileged=<span style="font-weight:bold;font-style:italic">true</span> -v /mydocker/u:/tmp:ro ubuntu
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>root@b7d1f80b47c5:/# <span style="font-weight:bold;font-style:italic">cd</span> /tmp
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>root@b7d1f80b47c5:/tmp# ls
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>root@b7d1f80b47c5:/tmp# touch c.txt
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>touch: cannot touch <span style="color:#666;font-style:italic">&#39;c.txt&#39;</span>: Read-only file system
</span></span></code></pre></div><p>可以看出，在容器内写入内容失败，因为是只读的文件系统。</p>
<p>此时如果宿主机写入内容，可以同步给容器内，容器可以读取到。</p>
<p>宿主机写入内容：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ <span style="font-weight:bold;font-style:italic">cd</span> /mydocker/u/
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>$ ls
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>$ touch a.txt
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>$ ls
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>a.txt
</span></span></code></pre></div><p>容器内可以读到：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>root@b7d1f80b47c5:/tmp# ls
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>a.txt
</span></span></code></pre></div><h4 id="卷的继承和共享">卷的继承和共享</h4>
<p>1、容器1完成和宿主机的映射</p>
<p>容器1：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker run -it --privileged=<span style="font-weight:bold;font-style:italic">true</span> -v /mydocker/u:/tmp --name u1 ubuntu
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>root@5a8ae43aa393:/# <span style="font-weight:bold;font-style:italic">cd</span> /tmp
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>root@5a8ae43aa393:/tmp# ls
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>root@5a8ae43aa393:/tmp# touch u1_data.txt
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>root@5a8ae43aa393:/tmp# ls
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span>u1_data.txt
</span></span></code></pre></div><p>宿主机：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ <span style="font-weight:bold;font-style:italic">cd</span> /mydocker/u
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>$ ls
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>u1_data.txt
</span></span></code></pre></div><p>2、容器2继承容器1的卷规则</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker run -it --privileged=<span style="font-weight:bold;font-style:italic">true</span> --volumes-from 父类 --name u2 ubuntu
</span></span></code></pre></div><p>容器2：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker run -it --privileged=<span style="font-weight:bold;font-style:italic">true</span> --volumes-from u1 --name u2 ubuntu
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>root@43f70de5eb61:/# <span style="font-weight:bold;font-style:italic">cd</span> /tmp
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>root@43f70de5eb61:/tmp# ls
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>u1_data.txt
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>root@43f70de5eb61:/tmp# touch u2_data.txt
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span>root@43f70de5eb61:/tmp# ls
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span><span>u1_data.txt  u2_data.txt
</span></span></code></pre></div><p>宿主机：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ <span style="font-weight:bold;font-style:italic">cd</span> /mydocker/u/
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>$ ls
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>u1_data.txt  u2_data.txt
</span></span></code></pre></div><p><strong>注</strong>：停掉容器1，容器2也能和宿主机互联互通。恢复容器1之后，容器2和宿主机在容器1停掉期间产生的数据也能在容器1中同步。</p>
<h2 id="docker常规安装简介">Docker常规安装简介</h2>
<h3 id="总体步骤">总体步骤</h3>
<h4 id="搜索镜像">搜索镜像</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker search [OPTIONS] TERM
</span></span></code></pre></div><h4 id="拉取镜像">拉取镜像</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker pull [OPTIONS] NAME[:TAG|@DIGEST]
</span></span></code></pre></div><h4 id="查看镜像">查看镜像</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker images [OPTIONS] [REPOSITORY[:TAG]]
</span></span></code></pre></div><h4 id="启动镜像">启动镜像</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker run [OPTIONS] IMAGE [COMMAND] [ARG...]
</span></span></code></pre></div><h5 id="服务端口映射">服务端口映射</h5>
<p>格式：<code>-p port:port</code></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker run -d -p 6379:6379 redis:6.0.8
</span></span></code></pre></div><h4 id="停止容器-1">停止容器</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker stop [OPTIONS] CONTAINER [CONTAINER...]
</span></span></code></pre></div><h4 id="移除容器">移除容器</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker rm [OPTIONS] CONTAINER [CONTAINER...]
</span></span></code></pre></div><h3 id="安装tomcat">安装Tomcat</h3>
<h4 id="dockerhub上面查找tomcat镜像">DockerHub上面查找Tomcat镜像</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker search tomcat
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>NAME    DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>tomcat  Apache Tomcat is an open <span style="font-weight:bold;font-style:italic">source</span> implementati…   3344      [OK]             
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>...
</span></span></code></pre></div><h4 id="从dockerhub上拉取tomcat到本地">从DockerHub上拉取Tomcat到本地</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker pull tomcat
</span></span></code></pre></div><h4 id="查看是否有拉取到的tomcat">查看是否有拉取到的Tomcat</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker images tomcat
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>REPOSITORY   TAG       IMAGE ID       CREATED        SIZE
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>tomcat       latest    fb5657adc892   6 months ago   680MB
</span></span></code></pre></div><h4 id="使用tomcat镜像创建容器实例也叫运行镜像">使用Tomcat镜像创建容器实例（也叫运行镜像）</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker run -d -p 8080:8080 tomcat
</span></span></code></pre></div><p><code>-p</code>：小写，<code>主机端口:docker容器端口</code></p>
<p><code>-P</code>：大写，<strong>随机分配端口</strong></p>
<p><code>i</code>：交互</p>
<p><code>t</code>：终端</p>
<p><code>d</code>：后台</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker run -d -p 8080:8080 --name t1 tomcat
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>788f39f0635eb7925652422217a9c6273f970926c55aef15d17c0c3d9d95ee6a
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>$ docker ps
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>CONTAINER ID   IMAGE     COMMAND             CREATED          STATUS          PORTS                                       NAMES
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>788f39f0635e   tomcat    <span style="color:#666;font-style:italic">&#34;catalina.sh run&#34;</span>   12 seconds ago   Up 11 seconds   0.0.0.0:8080-&gt;8080/tcp, :::8080-&gt;8080/tcp   t1
</span></span></code></pre></div><h4 id="访问猫首页">访问猫首页</h4>
<h5 id="问题">问题</h5>
<p>因为新版设置，导致无法访问。</p>
<p>
        <a data-fancybox="gallery" href="https://blog.imw7.com/images/docker/tomcat1.png">
            <img class="mx-auto" alt="tomcat1" src="https://blog.imw7.com/images/docker/tomcat1.png" />
        </a>
    </p>
<h5 id="解决">解决</h5>
<p>1、可能没有映射端口或者没有关闭防火墙</p>
<p>因为是在阿里云云服务器ECS上的docker里安装的tomcat，所以需要访问<code>120.77.71.67:8080</code>。<strong>需要在安全组中放开8080端口</strong>。</p>
<p>2、把webapps.dist目录换成webapps</p>
<ul>
<li>先成功启动tomcat</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker ps
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>CONTAINER ID   IMAGE     COMMAND             CREATED         STATUS         PORTS                                       NAMES
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>788f39f0635e   tomcat    <span style="color:#666;font-style:italic">&#34;catalina.sh run&#34;</span>   6 minutes ago   Up 6 minutes   0.0.0.0:8080-&gt;8080/tcp, :::8080-&gt;8080/tcp   t1
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>$ docker <span style="font-weight:bold;font-style:italic">exec</span> -it t1 /bin/bash
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>root@788f39f0635e:/usr/local/tomcat# 
</span></span></code></pre></div><ul>
<li>查看webapps文件夹，为空</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>root@788f39f0635e:/usr/local/tomcat# <span style="font-weight:bold;font-style:italic">cd</span> webapps
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>root@788f39f0635e:/usr/local/tomcat/webapps# ls -l
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>total 0
</span></span></code></pre></div><ul>
<li>把webapps.dist目录换成webapps</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>root@788f39f0635e:/usr/local/tomcat/webapps# <span style="font-weight:bold;font-style:italic">cd</span> ..
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>root@788f39f0635e:/usr/local/tomcat# rm -r webapps
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>root@788f39f0635e:/usr/local/tomcat# mv webapps.dist webapps
</span></span></code></pre></div><p>修改完成后，可成功访问tomcat首页。</p>
<p>
        <a data-fancybox="gallery" href="https://blog.imw7.com/images/docker/tomcat2.png">
            <img class="mx-auto" alt="tomcat2" src="https://blog.imw7.com/images/docker/tomcat2.png" />
        </a>
    </p>
<h4 id="免修改版说明">免修改版说明</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker pull billygoo/tomcat8-jdk8
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>$ docker run -d -p 8080:8080 --name mytomcat8 billygoo/tomcat8-jdk8
</span></span></code></pre></div><p>使用特定版本可以免去最新版的修改过程，简化构建程序。</p>
<p>
        <a data-fancybox="gallery" href="https://blog.imw7.com/images/docker/tomcat3.png">
            <img class="mx-auto" alt="tomcat2" src="https://blog.imw7.com/images/docker/tomcat3.png" />
        </a>
    </p>
<h3 id="安装mysql">安装MySQL</h3>
<h4 id="dockerhub上查找mysql镜像">DockerHub上查找MySQL镜像</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker search mysql
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>NAME    DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>mysql   MySQL is a widely used, open-source relation…   12767     [OK] 
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>...
</span></span></code></pre></div><h4 id="从dockerhub上阿里云加速器拉取mysql57镜像到本地">从DockerHub上（阿里云加速器）拉取MySQL5.7镜像到本地</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker pull mysql:5.7
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>$ docker images mysql:5.7
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>REPOSITORY   TAG       IMAGE ID       CREATED        SIZE
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>mysql        5.7       c20987f18b13   6 months ago   448MB
</span></span></code></pre></div><h4 id="使用mysql57镜像创建容器也叫运行镜像">使用MySQL5.7镜像创建容器（也叫运行镜像）</h4>
<h5 id="命令出处">命令出处</h5>
<p>参见DockerHub官网<a href="https://hub.docker.com/_/mysql?tab=description">MySQL界面</a>。</p>
<h5 id="简单版">简单版</h5>
<p>1、使用MySQL镜像</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span>$ docker run -p 3306:3306 -e <span style="color:#666;font-weight:bold;font-style:italic">MYSQL_ROOT_PASSWORD</span>=123456 -d mysql:5.7
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>65ae64574e4e6b301cb30744156d1c46b14e24a6e89f6d01943939da566689e8
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>$ docker ps
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>CONTAINER ID   IMAGE       COMMAND                  CREATED          STATUS          PORTS                                                  NAMES
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>65ae64574e4e   mysql:5.7   <span style="color:#666;font-style:italic">&#34;docker-entrypoint.s…&#34;</span>   18 seconds ago   Up 17 seconds   0.0.0.0:3306-&gt;3306/tcp, :::3306-&gt;3306/tcp, 33060/tcp   objective_satoshi
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>$ docker <span style="font-weight:bold;font-style:italic">exec</span> -it 65ae64574e4e /bin/bash
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>root@65ae64574e4e:/# mysql -uroot -p
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>Enter password: 
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>Welcome to the MySQL monitor.  Commands end with ; or <span style="color:#666;font-style:italic">\g</span>.
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>Your MySQL connection id is 2
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>Server version: 5.7.36 MySQL Community Server (GPL)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>...
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>mysql&gt;
</span></span></code></pre></div><p>2、建库表插入数据</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span>mysql&gt; show databases;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>+--------------------+
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>| Database           |
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>+--------------------+
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>| information_schema |
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>| mysql              |
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>| performance_schema |
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>| sys                |
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>+--------------------+
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>4 rows in <span style="font-weight:bold;font-style:italic">set</span> (0.00 sec)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>mysql&gt; create database db01;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>Query OK, 1 row affected (0.00 sec)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>mysql&gt; use db01;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>Database changed
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>mysql&gt; create table t1(id int, name varchar(20));
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span>Query OK, 0 rows affected (0.03 sec)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span>mysql&gt; insert into t1 values(1, <span style="color:#666;font-style:italic">&#39;z3&#39;</span>);
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span>Query OK, 1 row affected (0.01 sec)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span>mysql&gt; <span style="font-weight:bold">select</span> * from t1;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span>+------+------+
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span><span>| id   | name |
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span><span>+------+------+
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span><span>|    1 | z3   |
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span><span>+------+------+
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29</span><span>1 row in <span style="font-weight:bold;font-style:italic">set</span> (0.00 sec)
</span></span></code></pre></div><p>3、外部Windows也来连接运行在docker上的MySQL容器实例服务</p>
<p>
        <a data-fancybox="gallery" href="https://blog.imw7.com/images/docker/workbench_connect.png">
            <img class="mx-auto" alt="workbench_connect" src="https://blog.imw7.com/images/docker/workbench_connect.png" />
        </a>
    </p>
<p>4、问题</p>
<p>① <strong>插入中文报错</strong></p>
<p>
        <a data-fancybox="gallery" href="https://blog.imw7.com/images/docker/mysql_problem.png">
            <img class="mx-auto" alt="mysql_problem" src="https://blog.imw7.com/images/docker/mysql_problem.png" />
        </a>
    </p>
<p>为什么报错？</p>
<p><strong>docker 上默认字符集编码隐患</strong></p>
<p>通过如下命令查看字符集编码：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-mysql" data-lang="mysql"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>mysql&gt; <span style="font-weight:bold">SHOW</span> VARIABLES <span style="font-weight:bold">LIKE</span> <span style="color:#666;font-style:italic">&#39;character%&#39;</span>;
</span></span></code></pre></div><p>在MySQL Workbench查看：</p>
<p>
        <a data-fancybox="gallery" href="https://blog.imw7.com/images/docker/workbench_encoding.png">
            <img class="mx-auto" alt="workbench_encoding" src="https://blog.imw7.com/images/docker/workbench_encoding.png" />
        </a>
    </p>
<p>在docker中的MySQL命令行查看：</p>
<p>
        <a data-fancybox="gallery" href="https://blog.imw7.com/images/docker/docker_encoding.png">
            <img class="mx-auto" alt="docker_encoding" src="https://blog.imw7.com/images/docker/docker_encoding.png" />
        </a>
    </p>
<p>可以看出，编码有所不同，docker 中文字体默认编码为<code>latin1</code>。需要将它修改为<code>utf8</code>编码，中文才能正常插入和显示。</p>
<p>② <strong>删除容器后，里面的MySQL数据怎么办</strong></p>
<p>容器实例一删除，mysql数据也会丢失。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>root@65ae64574e4e:/# <span style="font-weight:bold;font-style:italic">exit</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="font-weight:bold;font-style:italic">exit</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>$ docker ps
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>CONTAINER ID   IMAGE       COMMAND                  CREATED             STATUS             PORTS                                                  NAMES
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>65ae64574e4e   mysql:5.7   <span style="color:#666;font-style:italic">&#34;docker-entrypoint.s…&#34;</span>   About an hour ago   Up About an hour   0.0.0.0:3306-&gt;3306/tcp, :::3306-&gt;3306/tcp, 33060/tcp   objective_satoshi
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span>$ docker rm -f 65ae64574e4e
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span><span>65ae64574e4e
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8</span><span>$ docker ps
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9</span><span>CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES
</span></span></code></pre></div><p>这是很显然的道理，容器被删除后，容器里面的MySQL也就被删除了，数据自然消失了。</p>
<h5 id="实战版">实战版</h5>
<p>1、新建MySQL容器实例</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker run -d -p 3306:3306 --privileged=<span style="font-weight:bold;font-style:italic">true</span> -v /data/mysql/log:/var/log/mysql -v /data/mysql/data:/var/lib/mysql -v /data/mysql/conf:/etc/mysql/conf.d -e <span style="color:#666;font-weight:bold;font-style:italic">MYSQL_ROOT_PASSWORD</span>=123456 --name mysql mysql:5.7
</span></span></code></pre></div><p>实现docker上的mysql数据同步到宿主机的功能。</p>
<p>2、新建my.cnf</p>
<p>通过容器卷同步给mysql容器实例，解决中文字符编码问题。</p>
<p>将下面的配置代码写入my.cnf文件中，可以将中文编码改为utf8。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ini" data-lang="ini"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="font-weight:bold">[client]</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>default_character_set=<span style="color:#666;font-style:italic">utf8</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="font-weight:bold">[mysqld]</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>collation_server = <span style="color:#666;font-style:italic">utf8_general_ci</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>character_set_server = <span style="color:#666;font-style:italic">utf8</span>
</span></span></code></pre></div><p>在宿主机进行如下操作：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ <span style="font-weight:bold;font-style:italic">cd</span> /data/mysql/conf/
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>$ ls
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>$ vim my.cnf
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>$ cat my.cnf
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>[client]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span><span style="color:#666;font-weight:bold;font-style:italic">default_character_set</span>=utf8
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span><span>[mysqld]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8</span><span><span style="color:#666;font-weight:bold;font-style:italic">collation_server</span> = utf8_general_ci
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9</span><span><span style="color:#666;font-weight:bold;font-style:italic">character_set_server</span> = utf8
</span></span></code></pre></div><p>3、重新启动MySQL容器实例再重新进入并查看字符编码</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span>$ docker restart mysql
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>mysql
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>$ docker ps
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>CONTAINER ID  IMAGE      COMMAND  CREATED        STATUS         PORTS   NAMES
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>8044e666f6ff  mysql:5.7  ...      3 minutes ago  Up 8 seconds   ...     mysql
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>$ docker <span style="font-weight:bold;font-style:italic">exec</span> -it 8044e666f6ff /bin/bash
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>root@8044e666f6ff:/# mysql -uroot -p
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>Enter password: 
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>...
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>mysql&gt; SHOW VARIABLES LIKE <span style="color:#666;font-style:italic">&#39;character%&#39;</span>;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>+--------------------------+----------------------------+
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>| Variable_name            | Value                      |
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>+--------------------------+----------------------------+
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>| character_set_client     | utf8                       |
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>| character_set_connection | utf8                       |
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>| character_set_database   | utf8                       |
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span>| character_set_filesystem | binary                     |
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span>| character_set_results    | utf8                       |
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span>| character_set_server     | utf8                       |
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span>| character_set_system     | utf8                       |
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span>| character_sets_dir       | /usr/share/mysql/charsets/ |
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span>+--------------------------+----------------------------+
</span></span></code></pre></div><p>可以看到字符集编码从<code>latin1</code>修改为了<code>utf8</code>。</p>
<p>4、再新建库新建表再插入中文测试</p>
<p>
        <a data-fancybox="gallery" href="https://blog.imw7.com/images/docker/wb_succ.png">
            <img class="mx-auto" alt="wb_succ" src="https://blog.imw7.com/images/docker/wb_succ.png" />
        </a>
    </p>
<p>可以看到成功插入了中文，没有出现错误。</p>
<p>也可在docker中的mysql查询：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-mysql" data-lang="mysql"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>mysql&gt; <span style="font-weight:bold">select</span> * <span style="font-weight:bold">from</span> t1;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>+------+--------+
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>| id   | name   |
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>+------+--------+
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>|    1 | z3     |
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span>|    2 | li4    |
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span><span>|    3 | <span style="">王五</span>   |
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8</span><span>+------+--------+
</span></span></code></pre></div><p>成功插入中文，没有问题。</p>
<p>5、结论</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>之前的DB无效
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>    
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>修改字符集操作+重启MySQL容器实例
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>    
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>之后的DB有效，需要新建
</span></span></code></pre></div><p>结论：<strong>docker安装完MySQL并run出容器后，建议先修改完字符集编码，再新建mysql库-表-插数据</strong>。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-mysql" data-lang="mysql"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>mysql&gt; <span style="font-weight:bold">create</span> <span style="font-weight:bold">database</span> db02;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>mysql&gt; <span style="font-weight:bold">use</span> db02;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>mysql&gt; <span style="font-weight:bold">create</span> <span style="font-weight:bold">table</span> <span style="color:#666;font-weight:bold;font-style:italic">t1</span>(id <span style="font-weight:bold">int</span>, name <span style="font-weight:bold">varchar</span>(20));
</span></span></code></pre></div><p>6、假如将当前容器实例删除，再重新来一次，之前建的db01还有吗？</p>
<p><strong>答案是有的</strong>。重新启动一个mysql容器，进入数据库查看数据，因为挂载了容器数据卷，所以数据会从宿主机中恢复到当前docker容器中。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span>$ docker run -d -p 3306:3306 --privileged=<span style="font-weight:bold;font-style:italic">true</span> -v /data/mysql/log:/var/log/mysql -v /data/mysql/data:/var/lib/mysql -v /data/mysql/conf:/etc/mysql/conf.d -e <span style="color:#666;font-weight:bold;font-style:italic">MYSQL_ROOT_PASSWORD</span>=123456 --name mysql mysql:5.7
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>3944d05f9ef3dad023b77dc2626a2ff0ca7db02a71cab875c478a3ff7021cf1b
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>$ docker ps
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>CONTAINER ID  IMAGE      COMMAND                 CREATED        STATUS        PORTS                                                 NAMES
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>3944d05f9ef3  mysql:5.7  <span style="color:#666;font-style:italic">&#34;docker-entrypoint.s…&#34;</span>  3 seconds ago  Up 3 seconds  0.0.0.0:3306-&gt;3306/tcp, :::3306-&gt;3306/tcp, 33060/tcp  mysql
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>$ docker <span style="font-weight:bold;font-style:italic">exec</span> -it mysql /bin/bash
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>root@3944d05f9ef3:/# mysql -uroot -p
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>Enter password: 
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>...
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>mysql&gt; use db01;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>Reading table information <span style="font-weight:bold">for</span> completion of table and column names
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>You can turn off this feature to get a quicker startup with -A
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>Database changed
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>mysql&gt; <span style="font-weight:bold">select</span> * from t1;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>+------+--------+
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>| id   | name   |
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span>+------+--------+
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span>|    1 | z3     |
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span>|    2 | li4    |
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span>|    3 | 王五   |
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span>+------+--------+
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span>3 rows in <span style="font-weight:bold;font-style:italic">set</span> (0.00 sec)
</span></span></code></pre></div><h3 id="安装redis">安装Redis</h3>
<h4 id="拉取镜像-1">拉取镜像</h4>
<p>从dokcer hub上（阿里云加速器）拉取redis镜像到本地标签为6.0.8</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker pull redis:6.0.8
</span></span></code></pre></div><h4 id="入门命令">入门命令</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span>$ docker run -d -p 6379:6379 redis:6.0.8
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>165eb674ce4fa94494958a77e179fe7f8a933b01acaf3897dc8c7e7e9e39eeff
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>$ docker ps
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>CONTAINER ID  IMAGE        COMMAND                 CREATED        STATUS        PORTS                                      NAMES
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>165eb674ce4f  redis:6.0.8  <span style="color:#666;font-style:italic">&#34;docker-entrypoint.s…&#34;</span>  5 seconds ago  Up 4 seconds  0.0.0.0:6379-&gt;6379/tcp, :::6379-&gt;6379/tcp  amazing_chebyshev
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>$ docker <span style="font-weight:bold;font-style:italic">exec</span> -it 165eb674ce4f /bin/bash
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>root@165eb674ce4f:/data# redis-cli
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>127.0.0.1:6379&gt; ping
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>PONG
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>127.0.0.1:6379&gt; <span style="font-weight:bold;font-style:italic">set</span> k1 v1
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>OK
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>127.0.0.1:6379&gt; get k1
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span><span style="color:#666;font-style:italic">&#34;v1&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>127.0.0.1:6379&gt;
</span></span></code></pre></div><h4 id="命令提醒容器卷记得加入--privilegedtrue">命令提醒：容器卷记得加入&ndash;privileged=true</h4>
<p>Docker挂在主机目录Docker访问出现<code>cannot open directory .: Permission denied</code>。</p>
<p><strong>解决办法</strong>：在挂载目录后多加一个<code>--privileged=true</code>参数即可。</p>
<h4 id="新建目录">新建目录</h4>
<p>在CentOS宿主机下新建目录<code>/data/redis</code>。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ mkdir -p /data/redis
</span></span></code></pre></div><h4 id="拷贝配置文件">拷贝配置文件</h4>
<p>将准备好的<code>redis.conf</code>文件放进宿主机的<code>/app/redis</code>目录，默认出厂的原始<a href="https://raw.githubusercontent.com/redis/redis/6.0/redis.conf">redis.conf</a>。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ cp /myredis/redis.conf /data/redis/
</span></span></code></pre></div><h4 id="修改配置文件">修改配置文件</h4>
<p>在<code>/data/redis</code>目录下修改<code>redis.conf</code>文件：</p>
<p>1、开启redis验证（可选）</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>requirepass foobared
</span></span></code></pre></div><p>2、允许redis外地连接</p>
<p>注释掉 <code>bind 127.0.0.1</code></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#888;font-style:italic"># bind 127.0.0.1</span>
</span></span></code></pre></div><p>3、daemonize no</p>
<p>将 <code>daemonize yes</code> 注释掉或设置为 <code>daemonize no</code>，因为该配置和 <code>docker run</code> 中 <code>-d</code> 参数冲突，会导致一直启动失败。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#888;font-style:italic"># daemonize yes</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#888;font-style:italic"># 或</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>daemonize no
</span></span></code></pre></div><p>4、开启redis数据持久化（可选）</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>appendonly yes
</span></span></code></pre></div><h4 id="创建容器">创建容器</h4>
<p>使用<code>redis:6.0.8</code>镜像创建容器（也叫运行镜像）：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker run -p 6379:6379 --name myrds --privileged=<span style="font-weight:bold;font-style:italic">true</span> -v /data/redis/redis.conf:/etc/redis/redis.conf -v /data/redis/data:/data -d redis:6.0.8 redis-server /etc/redis/redis.conf
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>d8a9a2a820193a31675fcacec2ced5e025b5f22dc63634637e4e5a86e2a1b2b8
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>$ docker ps
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>CONTAINER ID   IMAGE         COMMAND                  CREATED          STATUS          PORTS                                       NAMES
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>d8a9a2a82019   redis:6.0.8   <span style="color:#666;font-style:italic">&#34;docker-entrypoint.s…&#34;</span>   24 seconds ago   Up 23 seconds   0.0.0.0:6379-&gt;6379/tcp, :::6379-&gt;6379/tcp   myrds
</span></span></code></pre></div><h4 id="测试redis-cli连接">测试redis-cli连接</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span>$ docker ps
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>CONTAINER ID   IMAGE         COMMAND                  CREATED          STATUS          PORTS                                       NAMES
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>d8a9a2a82019   redis:6.0.8   <span style="color:#666;font-style:italic">&#34;docker-entrypoint.s…&#34;</span>   24 seconds ago   Up 23 seconds   0.0.0.0:6379-&gt;6379/tcp, :::6379-&gt;6379/tcp   myrds
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>$ docker <span style="font-weight:bold;font-style:italic">exec</span> -it myrds /bin/bash
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>root@d8a9a2a82019:/data# redis-cli -a password
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>Warning: Using a password with <span style="color:#666;font-style:italic">&#39;-a&#39;</span> or <span style="color:#666;font-style:italic">&#39;-u&#39;</span> option on the <span style="font-weight:bold;font-style:italic">command</span> line interface may not be safe.
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>127.0.0.1:6379&gt; ping
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>PONG
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>127.0.0.1:6379&gt; <span style="font-weight:bold;font-style:italic">set</span> k1 v1
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>OK
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>127.0.0.1:6379&gt; get k1
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#666;font-style:italic">&#34;v1&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>127.0.0.1:6379&gt; 
</span></span></code></pre></div><h4 id="请证明docker启动使用了自己指定的配置文件">请证明docker启动使用了自己指定的配置文件</h4>
<h5 id="修改前">修改前</h5>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>$ docker <span style="font-weight:bold;font-style:italic">exec</span> -it myrds /bin/bash
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>root@d8a9a2a82019:/data# redis-cli -a password
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>Warning: Using a password with <span style="color:#666;font-style:italic">&#39;-a&#39;</span> or <span style="color:#666;font-style:italic">&#39;-u&#39;</span> option on the <span style="font-weight:bold;font-style:italic">command</span> line interface may not be safe.
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>127.0.0.1:6379&gt; <span style="font-weight:bold">select</span> 15
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>OK
</span></span></code></pre></div><p>这里用的配置文件，数据库默认是16个。</p>
<h5 id="修改后">修改后</h5>
<p><strong>注</strong>：修改后记得重启服务。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#888;font-style:italic"># 宿主机/app/redis/redis.conf</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#888;font-style:italic"># Set the number of databases. The default database is DB 0, you can select</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#888;font-style:italic"># a different one on a per-connection basis using SELECT &lt;dbid&gt; where</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#888;font-style:italic"># dbid is a number between 0 and &#39;databases&#39;-1</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>databases 10
</span></span></code></pre></div><p>宿主机的修改会同步给docker容器里面的配置。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span>$ docker restart myrds
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>myrds
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>$ docker ps
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>CONTAINER ID   IMAGE         COMMAND                  CREATED          STATUS         PORTS                                       NAMES
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>d8a9a2a82019   redis:6.0.8   <span style="color:#666;font-style:italic">&#34;docker-entrypoint.s…&#34;</span>   23 minutes ago   Up 7 seconds   0.0.0.0:6379-&gt;6379/tcp, :::6379-&gt;6379/tcp   myrds
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>$ docker <span style="font-weight:bold;font-style:italic">exec</span> -it myrds /bin/bash
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>root@d8a9a2a82019:/data# redis-cli -a password
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>Warning: Using a password with <span style="color:#666;font-style:italic">&#39;-a&#39;</span> or <span style="color:#666;font-style:italic">&#39;-u&#39;</span> option on the <span style="font-weight:bold;font-style:italic">command</span> line interface may not be safe.
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>127.0.0.1:6379&gt; get k1
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#666;font-style:italic">&#34;v1&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>127.0.0.1:6379&gt; <span style="font-weight:bold">select</span> 15
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>(error) ERR DB index is out of range
</span></span></code></pre></div><h3 id="安装nginx">安装Nginx</h3>
<p>见Docker进阶指南<a href="https://blog.imw7.com/post/docker_advanced/#%E7%99%BB%E9%99%86%E5%B9%B6%E6%BC%94%E7%A4%BA%E4%BB%8B%E7%BB%8D%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C%E6%A1%88%E4%BE%8B">Portainer</a></p>
        </div>

        


        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/post/about_docker/">Docker的安装与使用</a></li>
        
        <li><a href="/post/Go/makefile/">为Go项目编写Makefile</a></li>
        
        <li><a href="/post/Go/go_micro/">go-micro</a></li>
        
        <li><a href="/post/Go/viper_tutorial/">Go语言配置管理神器——Viper中文教程</a></li>
        
        <li><a href="/post/Go/protobuf/">protobuf初识</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='/tags/Docker'>Docker</a></li>
                
                <li><a href='/tags/%E5%B8%B8%E7%94%A8%E7%BB%84%E4%BB%B6%E5%92%8C%E6%8A%80%E5%B7%A7'>常用组件和技巧</a></li>
                
            </ul>
            
        </div>
    </article>
    
    

    
    
    
    

</div>

                    <footer id="footer">
    <script type="text/javascript"
        async
        src="https://cdn.bootcss.com/mathjax/2.7.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$'], ['\[\[','\]\]']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
});

MathJax.Hub.Queue(function() {
    
    
    
    var all = MathJax.Hub.getAllJax(), i;
    for(i = 0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
</script>

<style>
code.has-jax {
    font: inherit;
    font-size: 100%;
    background: inherit;
    border: inherit;
    color: #515151;
}
</style>

    <div>
        &copy; 2022 <a href="https://blog.imw7.com/">魏奇的博客 By 魏奇</a>
        
        | <a rel="nofollow" target="_blank" href="http://beian.miit.gov.cn/">蜀ICP备2022000811号-1</a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>


    
    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script><script src="//cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js"></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>
    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




    <script src='/js/douban.js'></script>


                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://blog.imw7.com/search' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://blog.imw7.com/">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://blog.imw7.com/post/hugo_guide/" title="Hugo使用指南">Hugo使用指南</a>
    </li>
    
    <li>
        <a href="https://blog.imw7.com/post/docker_advanced/" title="Docker进阶指南">Docker进阶指南</a>
    </li>
    
    <li>
        <a href="https://blog.imw7.com/post/docker_guide/" title="Docker简易指南">Docker简易指南</a>
    </li>
    
    <li>
        <a href="https://blog.imw7.com/post/Go/fastdfs/" title="FastDFS">FastDFS</a>
    </li>
    
    <li>
        <a href="https://blog.imw7.com/post/mysql/" title="在CentOS7.x上安装MySQL8.0">在CentOS7.x上安装MySQL8.0</a>
    </li>
    
    <li>
        <a href="https://blog.imw7.com/post/redis_on_centos/" title="CentOS与Redis">CentOS与Redis</a>
    </li>
    
    <li>
        <a href="https://blog.imw7.com/post/ssh/" title="ssh使用指南">ssh使用指南</a>
    </li>
    
    <li>
        <a href="https://blog.imw7.com/post/http/" title="HTTP协议">HTTP协议</a>
    </li>
    
    <li>
        <a href="https://blog.imw7.com/post/Go/project_struct/" title="一般项目的结构">一般项目的结构</a>
    </li>
    
    <li>
        <a href="https://blog.imw7.com/post/Go/bcrypt/" title="密码加密">密码加密</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href='/categories/'>分类</a></h3>
<ul class="widget-list">
    
    <li><a href="https://blog.imw7.com/categories/Docker/">Docker (3)</a></li>
    
    <li><a href="https://blog.imw7.com/categories/Go/">Go (53)</a></li>
    
    <li><a href="https://blog.imw7.com/categories/Hexo/">Hexo (1)</a></li>
    
    <li><a href="https://blog.imw7.com/categories/Hugo/">Hugo (1)</a></li>
    
    <li><a href="https://blog.imw7.com/categories/git/">git (1)</a></li>
    
    <li><a href="https://blog.imw7.com/categories/%E5%85%B6%E4%BB%96/">其他 (1)</a></li>
    
    <li><a href="https://blog.imw7.com/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8/">服务器 (3)</a></li>
    
    <li><a href="https://blog.imw7.com/categories/%E7%AE%97%E6%B3%95/">算法 (1)</a></li>
    
    <li><a href="https://blog.imw7.com/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络 (1)</a></li>
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href='/tags/'>标签</a></h3>
<div class="tagcloud">
    
    <a href="https://blog.imw7.com/tags/Bcrypt/">Bcrypt</a>
    
    <a href="https://blog.imw7.com/tags/Cookie/">Cookie</a>
    
    <a href="https://blog.imw7.com/tags/Docker/">Docker</a>
    
    <a href="https://blog.imw7.com/tags/ES/">ES</a>
    
    <a href="https://blog.imw7.com/tags/Firefox/">Firefox</a>
    
    <a href="https://blog.imw7.com/tags/GMP/">GMP</a>
    
    <a href="https://blog.imw7.com/tags/HDMI/">HDMI</a>
    
    <a href="https://blog.imw7.com/tags/Hexo/">Hexo</a>
    
    <a href="https://blog.imw7.com/tags/Hugo/">Hugo</a>
    
    <a href="https://blog.imw7.com/tags/Kafka/">Kafka</a>
    
    <a href="https://blog.imw7.com/tags/Kibana/">Kibana</a>
    
    <a href="https://blog.imw7.com/tags/Linux/">Linux</a>
    
    <a href="https://blog.imw7.com/tags/MongoDB/">MongoDB</a>
    
    <a href="https://blog.imw7.com/tags/MySQL/">MySQL</a>
    
    <a href="https://blog.imw7.com/tags/NSQ/">NSQ</a>
    
    <a href="https://blog.imw7.com/tags/Redis/">Redis</a>
    
    <a href="https://blog.imw7.com/tags/Session/">Session</a>
    
    <a href="https://blog.imw7.com/tags/Ubuntu/">Ubuntu</a>
    
    <a href="https://blog.imw7.com/tags/VS-Code/">VS Code</a>
    
    <a href="https://blog.imw7.com/tags/Web%E5%BC%80%E5%8F%91/">Web开发</a>
    
    <a href="https://blog.imw7.com/tags/centos/">centos</a>
    
    <a href="https://blog.imw7.com/tags/channel/">channel</a>
    
    <a href="https://blog.imw7.com/tags/context/">context</a>
    
    <a href="https://blog.imw7.com/tags/etcd/">etcd</a>
    
    <a href="https://blog.imw7.com/tags/fastdfs/">fastdfs</a>
    
    <a href="https://blog.imw7.com/tags/flag/">flag</a>
    
    <a href="https://blog.imw7.com/tags/fmt/">fmt</a>
    
    <a href="https://blog.imw7.com/tags/gin/">gin</a>
    
    <a href="https://blog.imw7.com/tags/git/">git</a>
    
    <a href="https://blog.imw7.com/tags/go-micro/">go-micro</a>
    
    <a href="https://blog.imw7.com/tags/go-module/">go module</a>
    
    <a href="https://blog.imw7.com/tags/goroutine/">goroutine</a>
    
    <a href="https://blog.imw7.com/tags/grpc/">grpc</a>
    
    <a href="https://blog.imw7.com/tags/http/">http</a>
    
    <a href="https://blog.imw7.com/tags/interface/">interface</a>
    
    <a href="https://blog.imw7.com/tags/iota/">iota</a>
    
    <a href="https://blog.imw7.com/tags/jwt/">jwt</a>
    
    <a href="https://blog.imw7.com/tags/log/">log</a>
    
    <a href="https://blog.imw7.com/tags/logrus/">logrus</a>
    
    <a href="https://blog.imw7.com/tags/makefile/">makefile</a>
    
    <a href="https://blog.imw7.com/tags/map/">map</a>
    
    <a href="https://blog.imw7.com/tags/MySQL/">MySQL</a>
    
    <a href="https://blog.imw7.com/tags/net/http/">net/http</a>
    
    <a href="https://blog.imw7.com/tags/os.Args/">os.Args</a>
    
    <a href="https://blog.imw7.com/tags/package/">package</a>
    
    <a href="https://blog.imw7.com/tags/pprof/">pprof</a>
    
    <a href="https://blog.imw7.com/tags/protobuf/">protobuf</a>
    
    <a href="https://blog.imw7.com/tags/sarama/">sarama</a>
    
    <a href="https://blog.imw7.com/tags/sqlx/">sqlx</a>
    
    <a href="https://blog.imw7.com/tags/ssh/">ssh</a>
    
    <a href="https://blog.imw7.com/tags/strconv/">strconv</a>
    
    <a href="https://blog.imw7.com/tags/tailf/">tailf</a>
    
    <a href="https://blog.imw7.com/tags/template/">template</a>
    
    <a href="https://blog.imw7.com/tags/time/">time</a>
    
    <a href="https://blog.imw7.com/tags/viper/">viper</a>
    
    <a href="https://blog.imw7.com/tags/yilia/">yilia</a>
    
    <a href="https://blog.imw7.com/tags/%E4%B8%8A%E4%BC%A0/">上传</a>
    
    <a href="https://blog.imw7.com/tags/%E4%B8%8B%E8%BD%BD/">下载</a>
    
    <a href="https://blog.imw7.com/tags/%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/">依赖管理</a>
    
    <a href="https://blog.imw7.com/tags/%E5%87%BD%E6%95%B0/">函数</a>
    
    <a href="https://blog.imw7.com/tags/%E5%88%87%E7%89%87/">切片</a>
    
    <a href="https://blog.imw7.com/tags/%E5%8F%8D%E5%B0%84/">反射</a>
    
    <a href="https://blog.imw7.com/tags/%E5%8F%98%E9%87%8F%E5%92%8C%E5%B8%B8%E9%87%8F/">变量和常量</a>
    
    <a href="https://blog.imw7.com/tags/%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/">基本数据类型</a>
    
    <a href="https://blog.imw7.com/tags/%E5%9F%BA%E7%A1%80/">基础</a>
    
    <a href="https://blog.imw7.com/tags/%E5%AF%86%E7%A0%81%E5%8A%A0%E5%AF%86/">密码加密</a>
    
    <a href="https://blog.imw7.com/tags/%E5%AF%BC%E5%85%A5%E6%9C%AC%E5%9C%B0%E5%8C%85/">导入本地包</a>
    
    <a href="https://blog.imw7.com/tags/%E5%B8%B8%E7%94%A8%E6%A1%86%E6%9E%B6%E5%92%8C%E7%BB%84%E4%BB%B6/">常用框架和组件</a>
    
    <a href="https://blog.imw7.com/tags/%E5%B8%B8%E7%94%A8%E7%BB%84%E4%BB%B6%E4%B8%8E%E6%8A%80%E5%B7%A7/">常用组件与技巧</a>
    
    <a href="https://blog.imw7.com/tags/%E5%B8%B8%E7%94%A8%E7%BB%84%E4%BB%B6%E5%92%8C%E6%8A%80%E5%B7%A7/">常用组件和技巧</a>
    
    <a href="https://blog.imw7.com/tags/%E5%B9%B6%E5%8F%91/">并发</a>
    
    <a href="https://blog.imw7.com/tags/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87/">开发环境准备</a>
    
    <a href="https://blog.imw7.com/tags/%E5%BC%82%E6%88%96/">异或</a>
    
    <a href="https://blog.imw7.com/tags/%E6%8C%87%E9%92%88/">指针</a>
    
    <a href="https://blog.imw7.com/tags/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/">排序算法</a>
    
    <a href="https://blog.imw7.com/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a>
    
    <a href="https://blog.imw7.com/tags/%E6%95%B0%E7%BB%84/">数组</a>
    
    <a href="https://blog.imw7.com/tags/%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/">文件操作</a>
    
    <a href="https://blog.imw7.com/tags/%E6%A0%87%E5%87%86%E5%BA%93/">标准库</a>
    
    <a href="https://blog.imw7.com/tags/%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/">流程控制</a>
    
    <a href="https://blog.imw7.com/tags/%E6%B5%8B%E8%AF%95/">测试</a>
    
    <a href="https://blog.imw7.com/tags/%E7%B1%BB%E5%9E%8B%E6%96%AD%E8%A8%80/">类型断言</a>
    
    <a href="https://blog.imw7.com/tags/%E7%BB%93%E6%9E%84%E4%BD%93/">结构体</a>
    
    <a href="https://blog.imw7.com/tags/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/">网络编程</a>
    
    <a href="https://blog.imw7.com/tags/%E8%B7%A8%E5%B9%B3%E5%8F%B0%E7%BC%96%E8%AF%91/">跨平台编译</a>
    
    <a href="https://blog.imw7.com/tags/%E8%BF%90%E7%AE%97%E7%AC%A6/">运算符</a>
    
    <a href="https://blog.imw7.com/tags/%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84/">项目结构</a>
    
</div>
    </section>

    
<section class="widget">
    <h3 class="widget-title">友情链接</h3>
    <ul class="widget-list">
        
        <li>
            <a target="_blank" href="https://blog.imw7.com/" title="魏奇的博客">魏奇的博客</a>
        </li>
        
    </ul>
</section>


    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://blog.imw7.com/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>